{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/admin/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\ntype OrderRow = {\n  id: number;\n  created_at: string;\n  status: string | null;\n  total_amount: any;\n  delivery_name: string | null;\n  delivery_phone: string | null;\n};\n\ntype PaymentRow = {\n  id?: number;\n  order_id: number;\n  amount: any;\n  status: string;\n  method: string;\n  created_at: string;\n  reference: string | null;\n};\n\ntype OrderItemRow = {\n  id: number;\n  order_id: number;\n  quantity: number;\n  price_at_purchase: any;\n  variant_id: number;\n  product_id?: number | null;\n  variant?: {\n    id: number;\n    label: string;\n    product?: { id: number; name: string } | null;\n  } | null;\n};\n\nfunction money(n: any) {\n  const x = Number(n ?? 0);\n  return new Intl.NumberFormat(\"en-GB\", { style: \"currency\", currency: \"GBP\" }).format(\n    Number.isFinite(x) ? x : 0\n  );\n}\n\nfunction num(n: any) {\n  const x = Number(n ?? 0);\n  return Number.isFinite(x) ? x : 0;\n}\n\ntype PaymentMethod = \"EVC\" | \"EDAHAB\" | \"MERCHANT\" | \"CASH\" | \"PREMIER_BANK\";\n\nfunction normalizeMethod(raw: string): PaymentMethod | null {\n  const m = raw.trim().toUpperCase();\n  if (m === \"EVC\") return \"EVC\";\n  if (m === \"EDAHAB\" || m === \"E-DAHAB\" || m === \"EDAHAB+\" || m === \"EDAHAAB\") return \"EDAHAB\";\n  if (m === \"MERCHANT\") return \"MERCHANT\";\n  if (m === \"CASH\") return \"CASH\";\n  if (m === \"PREMIER_BANK\" || m === \"PREMIER\" || m === \"BANK\") return \"PREMIER_BANK\";\n  return null;\n}\n\nfunction promptMethod(): PaymentMethod | null {\n  const raw = window.prompt(\n    \"Payment method? Type: EVC, EDAHAB, MERCHANT, CASH, PREMIER_BANK\",\n    \"EVC\"\n  );\n  if (!raw) return null;\n  const m = normalizeMethod(raw);\n  if (!m) {\n    alert(\"Invalid method. Use: EVC, EDAHAB, MERCHANT, CASH, PREMIER_BANK\");\n    return null;\n  }\n  return m;\n}\n\ntype OrderView = OrderRow & {\n  total: number;\n  paid: number;\n  remaining: number;\n  computedStatus: \"PENDING\" | \"PAID\";\n};\n\nexport default function AdminOrdersPage() {\n  const [loading, setLoading] = useState(true);\n  const [busyOrderId, setBusyOrderId] = useState<number | null>(null);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [orders, setOrders] = useState<OrderRow[]>([]);\n  const [payments, setPayments] = useState<PaymentRow[]>([]);\n\n  // details modal state\n  const [openOrderId, setOpenOrderId] = useState<number | null>(null);\n  const [detailsLoading, setDetailsLoading] = useState(false);\n  const [detailsErr, setDetailsErr] = useState<string | null>(null);\n  const [orderItems, setOrderItems] = useState<OrderItemRow[]>([]);\n\n  async function load() {\n    setLoading(true);\n    setErr(null);\n\n    try {\n      const [{ data: o, error: oe }, { data: p, error: pe }] = await Promise.all([\n        supabase\n          .from(\"orders\")\n          .select(\"id,created_at,status,total_amount,delivery_name,delivery_phone\")\n          .order(\"created_at\", { ascending: false })\n          .limit(200),\n        supabase\n          .from(\"payments\")\n          .select(\"id,order_id,amount,status,method,created_at,reference\")\n          .order(\"created_at\", { ascending: false })\n          .limit(2000),\n      ]);\n\n      if (oe) throw oe;\n      if (pe) throw pe;\n\n      setOrders((o ?? []) as any);\n      setPayments((p ?? []) as any);\n    } catch (e: any) {\n      setErr(e?.message || \"Failed to load orders\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      await load();\n      if (!alive) return;\n    })();\n    return () => {\n      alive = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const paidMap = useMemo(() => {\n    const m = new Map<number, number>();\n    for (const row of payments) {\n      const orderId = Number((row as any).order_id);\n      if (!orderId) continue;\n      const st = String((row as any).status || \"\").toUpperCase();\n      if (st !== \"SUCCESS\") continue;\n      m.set(orderId, (m.get(orderId) ?? 0) + num((row as any).amount));\n    }\n    return m;\n  }, [payments]);\n\n  const viewRows: OrderView[] = useMemo(() => {\n    return orders.map((o) => {\n      const total = num(o.total_amount);\n      const paid = paidMap.get(Number(o.id)) ?? 0;\n      const remaining = Math.max(0, total - paid);\n      const computedStatus: \"PENDING\" | \"PAID\" = remaining > 0 ? \"PENDING\" : \"PAID\";\n      return { ...o, total, paid, remaining, computedStatus };\n    });\n  }, [orders, paidMap]);\n\n  const stats = useMemo(() => {\n    const pending = viewRows.filter((o) => o.computedStatus === \"PENDING\").length;\n    const total = viewRows.reduce((s, o) => s + o.total, 0);\n    const outstanding = viewRows.reduce((s, o) => s + o.remaining, 0);\n    return { pending, total, outstanding };\n  }, [viewRows]);\n\n  const paymentsForOrder = useMemo(() => {\n    const byOrder = new Map<number, PaymentRow[]>();\n    for (const p of payments) {\n      const oid = Number((p as any).order_id);\n      if (!oid) continue;\n      if (!byOrder.has(oid)) byOrder.set(oid, []);\n      byOrder.get(oid)!.push(p);\n    }\n    for (const [oid, arr] of byOrder.entries()) {\n      arr.sort((a, b) => String(b.created_at).localeCompare(String(a.created_at)));\n      byOrder.set(oid, arr);\n    }\n    return byOrder;\n  }, [payments]);\n\n  async function addPayment(args: { orderId: number; amount: number; method: PaymentMethod }) {\n    // unique reference to reduce accidental duplicates\n    const ref = `ORDPAY-${args.orderId}-${Date.now()}-${Math.random().toString(16).slice(2)}`;\n\n    const ins = await supabase.from(\"payments\").insert({\n      order_id: args.orderId,\n      method: args.method,\n      amount: args.amount,\n      status: \"SUCCESS\",\n      reference: ref,\n    });\n\n    if (ins.error) throw ins.error;\n  }\n\n  async function setOrderStatus(orderId: number, status: \"PENDING\" | \"PAID\") {\n    const up = await supabase.from(\"orders\").update({ status }).eq(\"id\", orderId);\n    if (up.error) throw up.error;\n  }\n\n  async function pay(order: OrderView, mode: \"FULL\" | \"PARTIAL\") {\n    if (order.remaining <= 0) return;\n\n    const method = promptMethod();\n    if (!method) return;\n\n    let amount = order.remaining;\n\n    if (mode === \"PARTIAL\") {\n      const raw = window.prompt(`Enter amount to pay (remaining: ${money(order.remaining)})`, \"\");\n      if (!raw) return;\n      amount = num(raw);\n      if (amount <= 0) return alert(\"Amount must be > 0\");\n      if (amount > order.remaining) return alert(\"Amount cannot exceed remaining\");\n    }\n\n    try {\n      setBusyOrderId(order.id);\n\n      await addPayment({ orderId: order.id, amount, method });\n\n      const newRemaining = Math.max(0, order.remaining - amount);\n      await setOrderStatus(order.id, newRemaining > 0 ? \"PENDING\" : \"PAID\");\n\n      await load();\n\n      // refresh modal if open\n      if (openOrderId === order.id) {\n        await openDetails(order.id);\n      }\n    } catch (e: any) {\n      console.error(e);\n      alert(e?.message || \"Payment failed\");\n    } finally {\n      setBusyOrderId(null);\n    }\n  }\n\n  async function openDetails(orderId: number) {\n    setOpenOrderId(orderId);\n    setDetailsLoading(true);\n    setDetailsErr(null);\n    setOrderItems([]);\n\n    try {\n      // join: order_items -> product_variants -> products\n      const { data, error } = await supabase\n        .from(\"order_items\")\n        .select(\n          `\n          id, order_id, quantity, price_at_purchase, variant_id, product_id,\n          variant:product_variants (\n            id, label,\n            product:products ( id, name )\n          )\n        `\n        )\n        .eq(\"order_id\", orderId)\n        .order(\"id\", { ascending: true });\n\n      if (error) throw error;\n      setOrderItems((data ?? []) as any);\n    } catch (e: any) {\n      setDetailsErr(e?.message || \"Failed to load order items\");\n    } finally {\n      setDetailsLoading(false);\n    }\n  }\n\n  const openOrder = useMemo(() => {\n    if (openOrderId == null) return null;\n    return viewRows.find((x) => Number(x.id) === Number(openOrderId)) ?? null;\n  }, [openOrderId, viewRows]);\n\n  const openPayments = useMemo(() => {\n    if (openOrderId == null) return [];\n    return paymentsForOrder.get(openOrderId) ?? [];\n  }, [openOrderId, paymentsForOrder]);\n\n  const openItemsTotal = useMemo(() => {\n    return orderItems.reduce((s, it) => s + num(it.price_at_purchase) * num(it.quantity), 0);\n  }, [orderItems]);\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 text-black\">\n      <div className=\"max-w-6xl mx-auto px-4 py-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <Link href=\"/admin\" className=\"text-sm text-blue-600 hover:underline\">\n              ← Admin\n            </Link>\n            <h1 className=\"text-xl font-semibold mt-2\">Orders</h1>\n            <p className=\"text-xs text-gray-600 mt-1\">\n              Status here is computed from payments: Total − SUCCESS payments.\n            </p>\n          </div>\n\n          <div className=\"text-xs text-gray-700 border bg-white rounded-2xl px-3 py-2\">\n            <div>\n              Pending(credit): <span className=\"font-semibold\">{loading ? \"…\" : stats.pending}</span>\n            </div>\n            <div>\n              Outstanding: <span className=\"font-semibold\">{loading ? \"…\" : money(stats.outstanding)}</span>\n            </div>\n            <div>\n              Total(loaded): <span className=\"font-semibold\">{loading ? \"…\" : money(stats.total)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-3 flex items-center gap-2\">\n          <button\n            onClick={load}\n            className=\"px-4 py-2 rounded-full border bg-white text-sm font-semibold\"\n            disabled={loading}\n          >\n            {loading ? \"Refreshing…\" : \"Refresh\"}\n          </button>\n        </div>\n\n        {err ? (\n          <div className=\"mt-4 border rounded-2xl p-4 bg-white text-sm text-red-600\">{err}</div>\n        ) : null}\n\n        <section className=\"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3\">\n          {(loading ? Array.from({ length: 8 }) : viewRows).map((o: any, idx: number) => (\n            <div\n              key={o?.id ?? idx}\n              className=\"border rounded-2xl p-4 bg-white cursor-pointer\"\n              onClick={() => (o?.id ? openDetails(Number(o.id)) : null)}\n              role=\"button\"\n              tabIndex={0}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && o?.id) openDetails(Number(o.id));\n              }}\n            >\n              <div className=\"flex justify-between gap-3\">\n                <div className=\"text-sm font-semibold\">Order #{o?.id ?? \"…\"}</div>\n                <div className=\"text-xs text-gray-600\">{o?.created_at ? String(o.created_at) : \"…\"}</div>\n              </div>\n\n              <div className=\"mt-2 text-sm\">\n                <span className=\"text-gray-600\">Status:</span>{\" \"}\n                <span className={`font-semibold ${o?.computedStatus === \"PENDING\" ? \"text-orange-700\" : \"text-green-700\"}`}>\n                  {o?.computedStatus ?? \"…\"}\n                </span>\n              </div>\n\n              <div className=\"mt-2 text-sm flex flex-wrap gap-4\">\n                <div>\n                  <span className=\"text-gray-600\">Total:</span>{\" \"}\n                  <span className=\"font-semibold\">{money(o?.total)}</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Paid:</span>{\" \"}\n                  <span className=\"font-semibold\">{money(o?.paid)}</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Remaining:</span>{\" \"}\n                  <span className=\"font-semibold\">{money(o?.remaining)}</span>\n                </div>\n              </div>\n\n              <div className=\"mt-2 text-xs text-gray-600\">\n                {o?.delivery_name ?? \"\"} {o?.delivery_phone ? `• ${o.delivery_phone}` : \"\"}\n              </div>\n\n              {o?.computedStatus === \"PENDING\" ? (\n                <div className=\"mt-3 flex gap-2\" onClick={(e) => e.stopPropagation()}>\n                  <button\n                    onClick={() => pay(o, \"FULL\")}\n                    disabled={busyOrderId != null}\n                    className=\"px-4 py-2 rounded-full bg-green-600 text-white text-sm font-semibold disabled:opacity-60\"\n                  >\n                    {busyOrderId === o.id ? \"Working…\" : \"Mark Paid\"}\n                  </button>\n                  <button\n                    onClick={() => pay(o, \"PARTIAL\")}\n                    disabled={busyOrderId != null}\n                    className=\"px-4 py-2 rounded-full border text-sm font-semibold disabled:opacity-60\"\n                  >\n                    {busyOrderId === o.id ? \"Working…\" : \"Pay partial\"}\n                  </button>\n                </div>\n              ) : (\n                <div className=\"mt-3 text-xs text-green-700 font-semibold\">Paid</div>\n              )}\n\n              <div className=\"mt-2 text-[11px] text-gray-500\">Tap to view items</div>\n            </div>\n          ))}\n        </section>\n      </div>\n\n      {/* Details modal */}\n      {openOrderId != null ? (\n        <div className=\"fixed inset-0 z-50 bg-black/40 flex items-end sm:items-center justify-center p-3\">\n          <div className=\"w-full sm:max-w-2xl bg-white rounded-2xl border shadow-lg overflow-hidden\">\n            <div className=\"p-4 border-b flex items-start justify-between gap-3\">\n              <div>\n                <div className=\"text-sm font-semibold\">Order #{openOrder?.id ?? openOrderId}</div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {openOrder?.delivery_name ?? \"\"} {openOrder?.delivery_phone ? `• ${openOrder.delivery_phone}` : \"\"}\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  Status: <span className=\"font-semibold\">{openOrder?.computedStatus ?? \"…\"}</span>\n                  {openOrder ? (\n                    <>\n                      {\" \"}• Remaining: <span className=\"font-semibold\">{money(openOrder.remaining)}</span>\n                    </>\n                  ) : null}\n                </div>\n              </div>\n              <button\n                className=\"px-3 py-2 rounded-full border text-sm font-semibold\"\n                onClick={() => setOpenOrderId(null)}\n              >\n                Close\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {detailsErr ? (\n                <div className=\"mb-3 border rounded-xl p-3 text-sm text-red-600\">{detailsErr}</div>\n              ) : null}\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                <div className=\"border rounded-2xl p-3\">\n                  <div className=\"text-xs text-gray-500\">Items</div>\n                  {detailsLoading ? (\n                    <div className=\"mt-2 text-sm text-gray-600\">Loading…</div>\n                  ) : orderItems.length === 0 ? (\n                    <div className=\"mt-2 text-sm text-gray-600\">No items found.</div>\n                  ) : (\n                    <div className=\"mt-2 space-y-2\">\n                      {orderItems.map((it) => {\n                        const name =\n                          it.variant?.product?.name ||\n                          (it.product_id ? `Product #${it.product_id}` : `Item #${it.id}`);\n                        const label = it.variant?.label ? ` (${it.variant.label})` : \"\";\n                        const line = num(it.price_at_purchase) * num(it.quantity);\n                        return (\n                          <div key={it.id} className=\"text-sm flex justify-between gap-3\">\n                            <div className=\"text-gray-800\">\n                              {name}\n                              {label} × {it.quantity}\n                            </div>\n                            <div className=\"font-semibold\">{money(line)}</div>\n                          </div>\n                        );\n                      })}\n                      <div className=\"pt-2 mt-2 border-t flex justify-between text-sm\">\n                        <span className=\"font-semibold\">Items total</span>\n                        <span className=\"font-semibold\">{money(openItemsTotal)}</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"border rounded-2xl p-3\">\n                  <div className=\"text-xs text-gray-500\">Payments</div>\n                  <div className=\"mt-2 space-y-2\">\n                    {openPayments.length === 0 ? (\n                      <div className=\"text-sm text-gray-600\">No payments yet.</div>\n                    ) : (\n                      openPayments.map((p, idx) => (\n                        <div key={(p as any)?.id ?? `${p.order_id}-${idx}`} className=\"text-sm flex justify-between gap-3\">\n                          <div className=\"text-gray-800\">\n                            {String(p.method)} • {String(p.status)}\n                            <div className=\"text-[11px] text-gray-500\">{String(p.created_at)}</div>\n                          </div>\n                          <div className=\"font-semibold\">{money(p.amount)}</div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n\n                  {openOrder?.computedStatus === \"PENDING\" ? (\n                    <div className=\"mt-3 flex gap-2\">\n                      <button\n                        onClick={() => (openOrder ? pay(openOrder, \"FULL\") : null)}\n                        disabled={busyOrderId != null}\n                        className=\"px-4 py-2 rounded-full bg-green-600 text-white text-sm font-semibold disabled:opacity-60\"\n                      >\n                        {busyOrderId === openOrder?.id ? \"Working…\" : \"Mark Paid\"}\n                      </button>\n                      <button\n                        onClick={() => (openOrder ? pay(openOrder, \"PARTIAL\") : null)}\n                        disabled={busyOrderId != null}\n                        className=\"px-4 py-2 rounded-full border text-sm font-semibold disabled:opacity-60\"\n                      >\n                        {busyOrderId === openOrder?.id ? \"Working…\" : \"Pay partial\"}\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"mt-3 text-xs text-green-700 font-semibold\">Paid</div>\n                  )}\n\n                  <div className=\"mt-2 text-[11px] text-gray-500\">\n                    Methods supported here: EVC, EDAHAB, MERCHANT, CASH, PREMIER_BANK\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}