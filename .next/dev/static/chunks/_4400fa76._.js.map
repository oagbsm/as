{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/localOrders.ts"],"sourcesContent":["export type PaymentMethod =\n  | \"EVC\"\n  | \"MERCHANT\"\n  | \"EDAHAB\"\n  | \"PREMIER_WALLET\"\n  | \"AMTEL\";\n\nexport type LocalOrderItem = {\n  productId: number;\n  variantId: number | null;\n  qty: number;\n  unitPrice: number;\n  lineTotal: number;\n  name: string; // includes variant label e.g. \"Basmati Rice (5 kg)\"\n};\n\nexport type LocalOrder = {\n  id: string;\n  createdAt: string; // ISO\n  channel: \"local\";\n\n  customer: { id: number; name: string; phone: string } | null;\n\n  note?: string;\n\n  subtotal: number;\n  deliveryFee: number;\n  total: number;\n\n  // NEW\n  isCredit: boolean;              // true = unpaid credit\n  isPaid: boolean;                // false when credit\n  paymentMethod: PaymentMethod | null; // only when paid (or non-credit)\n  paidAt?: string;                // when marked paid\n\n  items: LocalOrderItem[];\n};\n\nexport type CreditLedgerRow = {\n  customerId: number;\n  name: string;\n  phone: string;\n  outstanding: number; // current due\n  lastOrderAt: string; // ISO\n};\n\nconst ORDERS_KEY = \"local_orders_v2\";\nconst CREDIT_KEY = \"credit_ledger_v1\";\n\n/* ===== Orders ===== */\nexport function readLocalOrders(): LocalOrder[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(ORDERS_KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writeLocalOrders(orders: LocalOrder[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));\n}\n\nexport function saveLocalOrder(order: LocalOrder) {\n  const all = readLocalOrders();\n  all.unshift(order);\n  writeLocalOrders(all);\n}\n\nexport function updateLocalOrder(orderId: string, patch: Partial<LocalOrder>) {\n  const all = readLocalOrders();\n  const idx = all.findIndex((o) => o.id === orderId);\n  if (idx === -1) return;\n  all[idx] = { ...all[idx], ...patch };\n  writeLocalOrders(all);\n}\n\nexport function clearLocalOrders() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(ORDERS_KEY);\n}\n\n/* ===== Credit ledger ===== */\nexport function readCreditLedger(): CreditLedgerRow[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(CREDIT_KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writeCreditLedger(rows: CreditLedgerRow[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(CREDIT_KEY, JSON.stringify(rows));\n}\n\nexport function addCredit(customer: { id: number; name: string; phone: string }, amount: number) {\n  const rows = readCreditLedger();\n  const idx = rows.findIndex((r) => r.customerId === customer.id);\n  const now = new Date().toISOString();\n\n  if (idx === -1) {\n    rows.unshift({\n      customerId: customer.id,\n      name: customer.name,\n      phone: customer.phone,\n      outstanding: Number(amount || 0),\n      lastOrderAt: now,\n    });\n  } else {\n    rows[idx] = {\n      ...rows[idx],\n      outstanding: Number(rows[idx].outstanding || 0) + Number(amount || 0),\n      lastOrderAt: now,\n    };\n  }\n  writeCreditLedger(rows);\n}\n\nexport function payCredit(customerId: number, amount: number) {\n  const rows = readCreditLedger();\n  const idx = rows.findIndex((r) => r.customerId === customerId);\n  if (idx === -1) return;\n\n  const newOutstanding = Math.max(0, Number(rows[idx].outstanding || 0) - Number(amount || 0));\n  rows[idx] = { ...rows[idx], outstanding: newOutstanding };\n  writeCreditLedger(rows);\n}\n\nexport function totalCreditDue(): number {\n  return readCreditLedger().reduce((sum, r) => sum + Number(r.outstanding || 0), 0);\n}\n\nexport function clearCreditLedger() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(CREDIT_KEY);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA8CA,MAAM,aAAa;AACnB,MAAM,aAAa;AAGZ,SAAS;IACd;;IACA,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,eAAe;IACxD,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,iBAAiB,MAAoB;IACnD;;IACA,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;AAClD;AAEO,SAAS,eAAe,KAAiB;IAC9C,MAAM,MAAM;IACZ,IAAI,OAAO,CAAC;IACZ,iBAAiB;AACnB;AAEO,SAAS,iBAAiB,OAAe,EAAE,KAA0B;IAC1E,MAAM,MAAM;IACZ,MAAM,MAAM,IAAI,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC1C,IAAI,QAAQ,CAAC,GAAG;IAChB,GAAG,CAAC,IAAI,GAAG;QAAE,GAAG,GAAG,CAAC,IAAI;QAAE,GAAG,KAAK;IAAC;IACnC,iBAAiB;AACnB;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC;AAC1B;AAGO,SAAS;IACd;;IACA,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,eAAe;IACxD,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,kBAAkB,IAAuB;IACvD;;IACA,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;AAClD;AAEO,SAAS,UAAU,QAAqD,EAAE,MAAc;IAC7F,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,SAAS,EAAE;IAC9D,MAAM,MAAM,IAAI,OAAO,WAAW;IAElC,IAAI,QAAQ,CAAC,GAAG;QACd,KAAK,OAAO,CAAC;YACX,YAAY,SAAS,EAAE;YACvB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,KAAK;YACrB,aAAa,OAAO,UAAU;YAC9B,aAAa;QACf;IACF,OAAO;QACL,IAAI,CAAC,IAAI,GAAG;YACV,GAAG,IAAI,CAAC,IAAI;YACZ,aAAa,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,OAAO,UAAU;YACnE,aAAa;QACf;IACF;IACA,kBAAkB;AACpB;AAEO,SAAS,UAAU,UAAkB,EAAE,MAAc;IAC1D,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;IACnD,IAAI,QAAQ,CAAC,GAAG;IAEhB,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,OAAO,UAAU;IACzF,IAAI,CAAC,IAAI,GAAG;QAAE,GAAG,IAAI,CAAC,IAAI;QAAE,aAAa;IAAe;IACxD,kBAAkB;AACpB;AAEO,SAAS;IACd,OAAO,mBAAmB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,OAAO,EAAE,WAAW,IAAI,IAAI;AACjF;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/payments.ts"],"sourcesContent":["export type PaymentMethod =\n  | \"EVC\"\n  | \"MERCHANT\"\n  | \"EDAHAB\"\n  | \"PREMIER_WALLET\"\n  | \"AMTEL\";\n\nexport type PaymentSource = \"SALE\" | \"CREDIT_PAYMENT\" | \"CREDIT_SETTLEMENT\";\n\nexport type PaymentRecord = {\n  id: string; // PAY-...\n  createdAt: string; // ISO\n  method: PaymentMethod;\n  amount: number;\n\n  source: PaymentSource;\n\n  // optional linking\n  orderId?: string;\n  customer?: { id: number; name: string; phone: string };\n\n  note?: string;\n};\n\nconst KEY = \"payments_ledger_v1\";\n\nexport function readPayments(): PaymentRecord[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writePayments(rows: PaymentRecord[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(KEY, JSON.stringify(rows));\n}\n\nexport function recordPayment(p: Omit<PaymentRecord, \"id\" | \"createdAt\">) {\n  const rows = readPayments();\n  rows.unshift({\n    id: `PAY-${Date.now()}`,\n    createdAt: new Date().toISOString(),\n    ...p,\n    amount: Number(p.amount || 0),\n  });\n  writePayments(rows);\n}\n\nexport function clearPayments() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(KEY);\n}\n"],"names":[],"mappings":";;;;;;;;;;AAwBA,MAAM,MAAM;AAEL,SAAS;IACd;;IACA,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,QAAQ;IACjD,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,cAAc,IAAqB;IACjD;;IACA,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAC3C;AAEO,SAAS,cAAc,CAA0C;IACtE,MAAM,OAAO;IACb,KAAK,OAAO,CAAC;QACX,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;QACvB,WAAW,IAAI,OAAO,WAAW;QACjC,GAAG,CAAC;QACJ,QAAQ,OAAO,EAAE,MAAM,IAAI;IAC7B;IACA,cAAc;AAChB;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  readLocalOrders,\n  updateLocalOrder,\n  payCredit,\n  totalCreditDue,\n  type LocalOrder,\n  type PaymentMethod,\n} from \"@/lib/localOrders\";\nimport { recordPayment } from \"@/lib/payments\";\n\nfunction formatGBP(n: number) {\n  return new Intl.NumberFormat(\"en-GB\", { style: \"currency\", currency: \"GBP\" }).format(n);\n}\n\nconst PRIMARY_METHODS: PaymentMethod[] = [\"EVC\", \"MERCHANT\", \"EDAHAB\"];\nconst MORE_METHODS: PaymentMethod[] = [\"PREMIER_WALLET\", \"AMTEL\"];\n\nfunction labelPM(m: PaymentMethod) {\n  if (m === \"EVC\") return \"EVC\";\n  if (m === \"MERCHANT\") return \"Merchant\";\n  if (m === \"EDAHAB\") return \"E-Dahab\";\n  if (m === \"PREMIER_WALLET\") return \"Premier Wallet\";\n  return \"Amtel\";\n}\n\nfunction isSameLocalDay(a: Date, b: Date) {\n  return a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();\n}\n\nexport default function OrdersPage() {\n  const [orders, setOrders] = useState<LocalOrder[]>([]);\n  const [q, setQ] = useState(\"\");\n  const [expanded, setExpanded] = useState<Record<string, boolean>>({});\n  const [creditDue, setCreditDue] = useState(0);\n\n  const [payingOrder, setPayingOrder] = useState<LocalOrder | null>(null);\n  const [paymentMethod, setPaymentMethod] = useState<PaymentMethod>(\"EVC\");\n  const [showMorePayments, setShowMorePayments] = useState(false);\n\n  function refresh() {\n    setOrders(readLocalOrders());\n    setCreditDue(totalCreditDue());\n  }\n\n  useEffect(() => {\n    refresh();\n  }, []);\n\n  const filtered = useMemo(() => {\n    const s = q.trim().toLowerCase();\n    if (!s) return orders;\n    return orders.filter((o) => {\n      const id = (o.id ?? \"\").toLowerCase();\n      const name = (o.customer?.name ?? \"\").toLowerCase();\n      const phone = String(o.customer?.phone ?? \"\").toLowerCase();\n      const note = (o.note ?? \"\").toLowerCase();\n      const status = o.isCredit && !o.isPaid ? \"credit\" : \"paid\";\n      return id.includes(s) || name.includes(s) || phone.includes(s) || note.includes(s) || status.includes(s);\n    });\n  }, [orders, q]);\n\n  const metrics = useMemo(() => {\n    const now = new Date();\n    const sevenDaysAgo = new Date(now);\n    sevenDaysAgo.setDate(now.getDate() - 7);\n\n    let allOrders = 0, allTotal = 0;\n    let todayOrders = 0, todayTotal = 0;\n    let weekOrders = 0, weekTotal = 0;\n\n    let creditCount = 0;\n\n    for (const o of orders) {\n      allOrders += 1;\n      allTotal += Number(o.total ?? 0);\n\n      if (o.isCredit && !o.isPaid) creditCount += 1;\n\n      const d = new Date(o.createdAt);\n      if (isSameLocalDay(d, now)) {\n        todayOrders += 1;\n        todayTotal += Number(o.total ?? 0);\n      }\n      if (d >= sevenDaysAgo) {\n        weekOrders += 1;\n        weekTotal += Number(o.total ?? 0);\n      }\n    }\n\n    return { allOrders, allTotal, todayOrders, todayTotal, weekOrders, weekTotal, creditCount };\n  }, [orders]);\n\n  function toggleExpand(id: string) {\n    setExpanded((p) => ({ ...p, [id]: !p[id] }));\n  }\n\n  function openPayModal(order: LocalOrder) {\n    setPayingOrder(order);\n    setPaymentMethod(\"EVC\");\n    setShowMorePayments(false);\n  }\n\n  function confirmMarkPaid() {\n    if (!payingOrder) return;\n    if (!payingOrder.customer) {\n      alert(\"This credit order has no customer. Cannot settle credit.\");\n      return;\n    }\n\n    // update order\n    updateLocalOrder(payingOrder.id, {\n      isPaid: true,\n      isCredit: false,\n      paymentMethod,\n      paidAt: new Date().toISOString(),\n    });\n\n    // reduce credit ledger\n    payCredit(payingOrder.customer.id, payingOrder.total);\n\n    // record payment settlement\n    recordPayment({\n      source: \"CREDIT_SETTLEMENT\",\n      method: paymentMethod,\n      amount: payingOrder.total,\n      orderId: payingOrder.id,\n      customer: payingOrder.customer,\n      note: \"Credit order settled\",\n    });\n\n    setPayingOrder(null);\n    refresh();\n  }\n\n  return (\n    <main className=\"min-h-screen bg-white text-black\">\n      <div className=\"sticky top-0 z-20 bg-white border-b\">\n        <div className=\"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <Link href=\"/\" className=\"text-sm text-blue-600 hover:underline\">‚Üê Home</Link>\n            <h1 className=\"text-lg font-semibold\">Orders History</h1>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Link href=\"/cart\" className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\">\n              Cart\n            </Link>\n            <Link href=\"/credits\" className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\">\n              Credits\n            </Link>\n            <Link href=\"/payments\" className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\">\n              Payments\n            </Link>\n            <button onClick={refresh} className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\">\n              Refresh\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <section className=\"max-w-6xl mx-auto px-4 pt-5\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\n          <div className=\"border rounded-2xl p-4\">\n            <div className=\"text-xs text-gray-600\">Today</div>\n            <div className=\"mt-1 text-xl font-extrabold\">{formatGBP(metrics.todayTotal)}</div>\n            <div className=\"mt-1 text-sm text-gray-700\">{metrics.todayOrders} order(s)</div>\n          </div>\n\n          <div className=\"border rounded-2xl p-4\">\n            <div className=\"text-xs text-gray-600\">Last 7 days</div>\n            <div className=\"mt-1 text-xl font-extrabold\">{formatGBP(metrics.weekTotal)}</div>\n            <div className=\"mt-1 text-sm text-gray-700\">{metrics.weekOrders} order(s)</div>\n          </div>\n\n          <div className=\"border rounded-2xl p-4\">\n            <div className=\"text-xs text-gray-600\">All-time</div>\n            <div className=\"mt-1 text-xl font-extrabold\">{formatGBP(metrics.allTotal)}</div>\n            <div className=\"mt-1 text-sm text-gray-700\">{metrics.allOrders} order(s)</div>\n          </div>\n\n          <div className=\"border rounded-2xl p-4 bg-[#FFF7ED]\">\n            <div className=\"text-xs text-orange-800\">Credits Due</div>\n            <div className=\"mt-1 text-xl font-extrabold text-orange-900\">{formatGBP(creditDue)}</div>\n            <div className=\"mt-1 text-sm text-orange-900\">{metrics.creditCount} credit order(s)</div>\n          </div>\n        </div>\n\n        <div className=\"mt-4 border rounded-2xl p-4\">\n          <label className=\"text-xs text-gray-600\">Search (name, phone, order id, note, credit)</label>\n          <input\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            placeholder=\"e.g. Hodan / 0622 / LO-... / credit\"\n            className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n          />\n          <div className=\"mt-2 text-xs text-gray-500\">\n            Showing <span className=\"font-semibold\">{filtered.length}</span> of{\" \"}\n            <span className=\"font-semibold\">{orders.length}</span> orders.\n          </div>\n        </div>\n      </section>\n\n      <section className=\"max-w-6xl mx-auto px-4 py-6\">\n        {filtered.length === 0 ? (\n          <div className=\"border rounded-2xl p-8 text-center\">\n            <div className=\"text-3xl\">üßæ</div>\n            <p className=\"mt-3 font-semibold\">No orders saved yet</p>\n            <p className=\"text-sm text-gray-600 mt-1\">Use Cart ‚Üí Local order</p>\n            <Link href=\"/cart\" className=\"inline-flex mt-5 px-5 py-2 rounded-full bg-blue-600 text-white text-sm font-semibold\">\n              Go to cart\n            </Link>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {filtered.map((o) => {\n              const open = !!expanded[o.id];\n              const customer = o.customer ? `${o.customer.name} ‚Ä¢ ${o.customer.phone}` : \"Walk-in customer\";\n              const created = new Date(o.createdAt).toLocaleString();\n\n              const isCredit = o.isCredit && !o.isPaid;\n\n              return (\n                <div key={o.id} className=\"border rounded-2xl p-4\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div className=\"min-w-0\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"text-sm font-semibold truncate\">{customer}</div>\n                        {isCredit ? (\n                          <span className=\"text-xs font-bold px-2 py-1 rounded-full bg-red-100 text-red-700\">CREDIT</span>\n                        ) : (\n                          <span className=\"text-xs font-bold px-2 py-1 rounded-full bg-green-100 text-green-700\">PAID</span>\n                        )}\n                      </div>\n\n                      <div className=\"text-xs text-gray-600 mt-1\">\n                        <span className=\"font-semibold\">{o.id}</span> ‚Ä¢ {created}\n                      </div>\n\n                      {o.paymentMethod && o.isPaid ? (\n                        <div className=\"mt-2 text-xs text-gray-600\">\n                          Paid by: <span className=\"text-gray-800 font-semibold\">{labelPM(o.paymentMethod)}</span>\n                        </div>\n                      ) : null}\n\n                      {o.note ? (\n                        <div className=\"mt-2 text-xs text-gray-600\">\n                          Note: <span className=\"text-gray-800\">{o.note}</span>\n                        </div>\n                      ) : null}\n                    </div>\n\n                    <div className=\"text-right\">\n                      <div className=\"text-lg font-extrabold\">{formatGBP(o.total)}</div>\n                      <div className=\"text-xs text-gray-600 mt-1\">{o.items.length} line(s)</div>\n\n                      <div className=\"mt-2 flex gap-2 justify-end\">\n                        <button\n                          onClick={() => toggleExpand(o.id)}\n                          className=\"h-8 px-3 rounded-full border text-xs font-semibold hover:bg-gray-50\"\n                        >\n                          {open ? \"Hide\" : \"View\"}\n                        </button>\n\n                        {isCredit ? (\n                          <button\n                            onClick={() => openPayModal(o)}\n                            className=\"h-8 px-3 rounded-full bg-[#0B6EA9] text-white text-xs font-semibold\"\n                          >\n                            Mark paid\n                          </button>\n                        ) : null}\n                      </div>\n                    </div>\n                  </div>\n\n                  {open ? (\n                    <div className=\"mt-4 border-t pt-4\">\n                      <div className=\"space-y-2\">\n                        {o.items.map((it, idx) => (\n                          <div\n                            key={`${o.id}-${it.productId}-${it.variantId ?? \"base\"}-${idx}`}\n                            className=\"flex justify-between text-sm\"\n                          >\n                            <div className=\"text-gray-800\">\n                              {it.name} √ó {it.qty}\n                              <div className=\"text-xs text-gray-500\">{formatGBP(it.unitPrice)} each</div>\n                            </div>\n                            <div className=\"font-semibold\">{formatGBP(it.lineTotal)}</div>\n                          </div>\n                        ))}\n                      </div>\n\n                      <div className=\"mt-4 border-t pt-3 text-sm space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Subtotal</span>\n                          <span className=\"font-semibold\">{formatGBP(o.subtotal)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Delivery</span>\n                          <span className=\"font-semibold\">{formatGBP(o.deliveryFee)}</span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-2\">\n                          <span className=\"font-semibold\">Total</span>\n                          <span className=\"font-semibold\">{formatGBP(o.total)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ) : null}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </section>\n\n      {payingOrder ? (\n        <div className=\"fixed inset-0 bg-black/30 z-50 grid place-items-center p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-md p-5 border shadow\">\n            <div className=\"text-lg font-semibold\">Mark credit as paid</div>\n            <div className=\"mt-1 text-sm text-gray-600\">\n              Order <span className=\"font-semibold\">{payingOrder.id}</span> ‚Ä¢ Total{\" \"}\n              <span className=\"font-semibold\">{formatGBP(payingOrder.total)}</span>\n            </div>\n\n            <div className=\"mt-4\">\n              <div className=\"text-xs text-gray-600 mb-2\">Payment method</div>\n              <div className=\"flex flex-wrap gap-2\">\n                {PRIMARY_METHODS.map((m) => {\n                  const active = paymentMethod === m;\n                  return (\n                    <button\n                      key={m}\n                      onClick={() => setPaymentMethod(m)}\n                      className={`h-9 px-4 rounded-full border text-sm font-semibold ${\n                        active ? \"border-[#0B6EA9] bg-[#EAF4FB] text-[#0B6EA9]\" : \"bg-white\"\n                      }`}\n                    >\n                      {labelPM(m)}\n                    </button>\n                  );\n                })}\n\n                <button\n                  onClick={() => setShowMorePayments((v) => !v)}\n                  className=\"h-9 px-4 rounded-full border text-sm font-semibold bg-white\"\n                >\n                  {showMorePayments ? \"Show less\" : \"Show more\"}\n                </button>\n\n                {showMorePayments\n                  ? MORE_METHODS.map((m) => {\n                      const active = paymentMethod === m;\n                      return (\n                        <button\n                          key={m}\n                          onClick={() => setPaymentMethod(m)}\n                          className={`h-9 px-4 rounded-full border text-sm font-semibold ${\n                            active ? \"border-[#0B6EA9] bg-[#EAF4FB] text-[#0B6EA9]\" : \"bg-white\"\n                          }`}\n                        >\n                          {labelPM(m)}\n                        </button>\n                      );\n                    })\n                  : null}\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex gap-2 justify-end\">\n              <button onClick={() => setPayingOrder(null)} className=\"h-10 px-4 rounded-full border font-semibold\">\n                Cancel\n              </button>\n              <button onClick={confirmMarkPaid} className=\"h-10 px-4 rounded-full bg-[#0B6EA9] text-white font-semibold\">\n                Confirm paid\n              </button>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}