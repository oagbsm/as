{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/admin/expenses/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\ntype ExpenseRow = {\n  id: number;\n  title: string;\n  category: string;\n  paid_method?: string | null;\n  amount: string; // numeric comes back as string\n  notes:  string | null;\n  expense_date: string; // YYYY-MM-DD\n  created_at: string;\n};\n\nconst n = (v: any) => (Number.isFinite(Number(v)) ? Number(v) : 0);\n\nexport default function ExpensesPage() {\n  const [rows, setRows] = useState<ExpenseRow[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const [title, setTitle] = useState(\"Delivery fuel\");\n  const [category, setCategory] = useState<\"MATO\" | \"LIIBAN\" | \"ABDIRAZAK\">(\"MATO\");\n  const [paidMethod, setPaidMethod] = useState<\"EVC\" | \"EDAHAB\" | \"MERCHANT\" | \"CASH\" | \"PREMIER_BANK\">(\"EVC\");\n  const [amount, setAmount] = useState(\"5\");\n  const [notes, setNotes] = useState(\"\");\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10));\n\n  async function load() {\n    setLoading(true);\n    const { data, error } = await supabase\n      .from(\"expenses\")\n      .select(\"*\")\n      .order(\"expense_date\", { ascending: false })\n      .order(\"id\", { ascending: false })\n      .limit(200);\n    setLoading(false);\n    if (error) return alert(error.message);\n    setRows((data ?? []) as any);\n  }\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const totalToday = useMemo(() => {\n    return rows\n      .filter((r) => r.expense_date === date)\n      .reduce((s, r) => s + n(r.amount), 0);\n  }, [rows, date]);\n\n  async function add() {\n    if (!title.trim()) return alert(\"Title required\");\n    const { error } = await supabase.from(\"expenses\").insert({\n      title: title.trim(),\n      category,\n      paid_method: paidMethod,\n      amount: n(amount),\n      notes: notes.trim() || null,\n      expense_date: date,\n    });\n    if (error) return alert(error.message);\n    setNotes(\"\");\n    await load();\n  }\n\n  return (\n    <main className=\"min-h-screen bg-white text-black\">\n      <div className=\"max-w-6xl mx-auto px-4 py-6\">\n        <h1 className=\"text-xl font-semibold\">Expenses</h1>\n\n        <div className=\"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4\">\n          <div className=\"border rounded-2xl p-4\">\n            <div className=\"font-semibold\">Add expense</div>\n            <div className=\"mt-3 space-y-2 text-sm\">\n              <input className=\"w-full border rounded-xl px-3 py-2\" value={title} onChange={(e)=>setTitle(e.target.value)} placeholder=\"Title\" />\n              <label className=\"text-xs text-gray-600\">Expense owner</label>\n              <select\n                className=\"w-full border rounded-xl px-3 py-2\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value as any)}\n              >\n                <option value=\"MATO\">MATO</option>\n                <option value=\"LIIBAN\">LIIBAN</option>\n                <option value=\"ABDIRAZAK\">ABDIRAZAK</option>\n              </select>\n              <label className=\"text-xs text-gray-600\">Paid method</label>\n              <select\n                className=\"w-full border rounded-xl px-3 py-2\"\n                value={paidMethod}\n                onChange={(e) => setPaidMethod(e.target.value as any)}\n              >\n                <option value=\"EVC\">EVC</option>\n                <option value=\"EDAHAB\">eDahab</option>\n                <option value=\"MERCHANT\">Merchant</option>\n                <option value=\"CASH\">Cash</option>\n                <option value=\"PREMIER_BANK\">Premier Bank</option>\n              </select>\n              <input className=\"w-full border rounded-xl px-3 py-2\" value={amount} onChange={(e)=>setAmount(e.target.value)} placeholder=\"Amount\" />\n              <input className=\"w-full border rounded-xl px-3 py-2\" value={date} onChange={(e)=>setDate(e.target.value)} type=\"date\" />\n              <textarea className=\"w-full border rounded-xl px-3 py-2\" value={notes} onChange={(e)=>setNotes(e.target.value)} placeholder=\"Notes (optional)\" rows={3} />\n              <button onClick={add} className=\"w-full rounded-full bg-blue-600 text-white py-2 font-semibold\">\n                Add\n              </button>\n              <div className=\"text-xs text-gray-600\">Today total: {totalToday.toFixed(2)}</div>\n            </div>\n          </div>\n\n          <div className=\"lg:col-span-2 border rounded-2xl p-4\">\n            <div className=\"font-semibold\">Recent</div>\n            <div className=\"mt-3 text-sm\">\n              {loading ? (\n                <div className=\"text-gray-600\">Loading…</div>\n              ) : rows.length === 0 ? (\n                <div className=\"text-gray-600\">No expenses.</div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {rows.map((r) => (\n                    <div key={r.id} className=\"flex justify-between border rounded-xl px-3 py-2\">\n                      <div>\n                        <div className=\"font-semibold\">{r.title}</div>\n                        <div className=\"text-xs text-gray-600\">{r.category} • {r.paid_method ?? \"EVC\"} • {r.expense_date}</div>\n                      </div>\n                      <div className=\"font-semibold\">{n(r.amount).toFixed(2)}</div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}