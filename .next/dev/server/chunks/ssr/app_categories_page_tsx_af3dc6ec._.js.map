{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/categories/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { createClient } from \"@/lib/supabase/client\";\n\ntype Category = {\n  id: number;\n  slug: string;\n  name?: string | null;\n  name_en?: string | null;\n  name_so?: string | null;\n};\n\ntype Subcategory = {\n  id: number;\n  category_id: number;\n  slug: string;\n  name_en?: string | null;\n  name_so?: string | null;\n  img?: string | null;\n};\n\nfunction getLabel(cat: Category, lang: \"so\" | \"en\") {\n  const so = cat?.name_so ?? cat?.name ?? \"Qayb\";\n  const en = cat?.name_en ?? cat?.name ?? \"Category\";\n  return lang === \"en\" ? en : so;\n}\n\nexport default function CategoriesPage() {\n  const { lang } = useLanguage();\n  const [cats, setCats] = useState<Category[]>([]);\n  const [subs, setSubs] = useState<Subcategory[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const supabase = createClient();\n\n    async function load() {\n      setLoading(true);\n\n      const { data: catData, error: catError } = await supabase\n        .from(\"categories\")\n        .select(\"id, slug, name, name_en, name_so\")\n        .order(\"id\", { ascending: true });\n\n      const { data: subData, error: subError } = await supabase\n        .from(\"subcategories\")\n        .select(\"id, category_id, slug, name_en, name_so, img\")\n        .order(\"id\", { ascending: true });\n\n      if (!catError && catData) setCats(catData as Category[]);\n      if (!subError && subData) setSubs(subData as Subcategory[]);\n\n      setLoading(false);\n    }\n\n    load();\n  }, []);\n\n  if (loading) {\n    return (\n      <main className=\"min-h-screen bg-[#F4F6F8] pb-20\">\n        <section className=\"mx-auto max-w-md bg-white border-b\">\n          <div className=\"px-4 pt-4 pb-3\">\n            <h1 className=\"text-base font-semibold text-gray-900\">\n              {lang === \"en\" ? \"All Categories\" : \"Dhammaan Qaybaha\"}\n            </h1>\n            <p className=\"mt-1 text-xs text-gray-500\">\n              {lang === \"en\"\n                ? \"Loading categories...\"\n                : \"Qaybaha ayaa soo dhacaya...\"}\n            </p>\n          </div>\n        </section>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-[#F4F6F8] pb-20\">\n      {/* HEADER */}\n      <section className=\"mx-auto max-w-md bg-white border-b\">\n        <div className=\"px-4 pt-4 pb-3\">\n          <h1 className=\"text-base font-semibold text-gray-900\">\n            {lang === \"en\" ? \"All Categories\" : \"Dhammaan Qaybaha\"}\n          </h1>\n          <p className=\"mt-1 text-xs text-gray-500\">\n            {lang === \"en\"\n              ? \"Browse all sections of the store.\"\n              : \"Ka dooro qaybaha kala duwan ee dukaanka.\"}\n          </p>\n        </div>\n      </section>\n\n      {/* CATEGORY SECTIONS WITH SUBCATEGORY ROWS */}\n      <section className=\"mx-auto max-w-md mt-2\">\n        {cats.map((cat) => {\n          const label = getLabel(cat, lang);\n          const catHref = `/category/${cat.slug}`;\n          const subsForCat = subs.filter((sub) => {\n            const cid = sub.category_id as number | undefined;\n            return cid === cat.id;\n          });\n\n          if (!subsForCat.length) return null;\n\n          return (\n            <div key={cat.id} className=\"mb-3 bg-white border-b\">\n              <div className=\"px-4 pt-4 flex items-center justify-between\">\n                <h2 className=\"text-base font-semibold text-gray-900\">\n                  {label}\n                </h2>\n                <Link\n                  href={catHref}\n                  className=\"text-sm font-semibold text-[#0B6EA9]\"\n                >\n                  {lang === \"en\" ? \"View All\" : \"Dhammaan\"}\n                </Link>\n              </div>\n\n              <div className=\"mt-3 px-4 pb-4\">\n                <div className=\"flex gap-3 overflow-x-auto pb-1\">\n                  {subsForCat.map((sub) => (\n                    <Link\n                      key={sub.id}\n                      href={`/subcategory/${sub.slug}`}\n                      className=\"min-w-[85px] max-w-[90px] rounded-xl bg-[#EAF3FF] px-1.5 py-1.5 flex flex-col items-center\"\n                    >\n                      <div className=\"h-10 w-full mb-2 flex items-center justify-center\">\n                        <Image\n                          src={(sub.img as string) || \"/example.png\"}\n                          alt={sub.name_so || sub.name_en}\n                          width={55}\n                          height={40}\n                          className=\"object-contain\"\n                        />\n                      </div>\n                      <div className=\"text-[9px] font-semibold text-gray-900 leading-tight text-center line-clamp-2\">\n                        {sub.name_en || sub.name_so}\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </section>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}