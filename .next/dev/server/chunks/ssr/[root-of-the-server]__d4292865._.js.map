{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/components/AddToCartButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AddToCartButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AddToCartButton.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/components/AddToCartButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AddToCartButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AddToCartButton.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","ignoreList":[0]}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/product/%5Bslug%5D/product-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/product/[slug]/product-client.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/product/[slug]/product-client.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","ignoreList":[0]}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/product/%5Bslug%5D/product-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/product/[slug]/product-client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/product/[slug]/product-client.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","ignoreList":[0]}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { supabase } from \"@/lib/supabaseClient\";\n\n/* =========================\n   Helpers\n========================= */\n\nexport function safeImg(src: any) {\n  const s = String(src ?? \"\").trim();\n  if (!s) return \"/example.png\";\n  if (s.startsWith(\"/\")) return s;\n  if (s.startsWith(\"http://\") || s.startsWith(\"https://\")) return s;\n  return \"/example.png\";\n}\n\n/* =========================\n   Types\n========================= */\n\ntype CategoryRow = {\n  id: number;\n  slug: string;\n  img: string | null;\n  name_so: string;\n  name_en: string;\n};\n\ntype SubcategoryRow = {\n  id: number;\n  category_id: number;\n  slug: string;\n  img: string | null;\n  name_so: string;\n  name_en: string;\n};\n\nexport type ProductRow = {\n  id: number;\n  name: string;\n  slug: string;\n  base_price: number; // numeric NOT NULL in DB\n  long_description: string; // NOT NULL in DB\n  category_id: number;\n  subcategory_id: number;\n  brand_id: number;\n  is_discounted: boolean;\n  tags?: string[] | null;\n  is_active: boolean;\n};\nexport type VariantRow = {\n  id: number;\n  product_id: number;\n  label: string;\n  price: number;\n\n  // optional if you track stock\n  stock?: number | null;\n};\n\n/* =========================\n   Home (categories + subcats)\n========================= */\n\nexport async function getCategoriesWithSubcategories() {\n  const { data: cats, error: catErr } = await supabase\n    .from(\"categories\")\n    .select(\"id,slug,img,name_so,name_en\")\n    .order(\"id\", { ascending: true });\n\n  if (catErr) throw catErr;\n\n  const { data: subs, error: subErr } = await supabase\n    .from(\"subcategories\")\n    .select(\"id,category_id,slug,img,name_so,name_en\")\n    .order(\"id\", { ascending: true });\n\n  if (subErr) throw subErr;\n\n  const categories = (cats ?? []) as CategoryRow[];\n  const subcategories = (subs ?? []) as SubcategoryRow[];\n\n  return categories.map((cat) => ({\n    ...cat,\n    subcats: subcategories.filter((s) => s.category_id === cat.id),\n  }));\n}\n\n/* =========================\n   Search page: fetch everything\n========================= */\n\nexport async function fetchAllCategories() {\n  const { data, error } = await supabase.from(\"categories\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllSubcategories() {\n  const { data, error } = await supabase.from(\"subcategories\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProducts() {\n  const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProductVariants() {\n  const { data, error } = await supabase.from(\"product_variants\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProductImages() {\n  const { data, error } = await supabase\n    .from(\"product_images\")\n    .select(\"*\")\n    .order(\"is_primary\", { ascending: false });\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Subcategory page helpers\n========================= */\n\nexport async function fetchSubcategoryBySlug(slug: string) {\n  const { data, error } = await supabase\n    .from(\"subcategories\")\n    .select(\"*\")\n    .eq(\"slug\", slug)\n    .maybeSingle();\n\n  if (error) {\n    console.error(\"fetchSubcategoryBySlug error:\", { slug, error });\n    throw error;\n  }\n\n  return data;\n}\nexport async function fetchBrandsByIds(ids: number[]) {\n  try {\n    const clean = Array.from(\n      new Set((ids || []).map((x) => Number(x)).filter((n) => Number.isFinite(n)))\n    );\n    if (!clean.length) return [];\n\n    const { data, error } = await supabase\n      .from(\"brands\")\n      .select(\"id,name,slug\")\n      .in(\"id\", clean)\n      .order(\"name\", { ascending: true });\n\n    if (error) {\n      console.error(\"fetchBrandsByIds error\", error);\n      return [];\n    }\n\n    return data ?? [];\n  } catch (e) {\n    console.error(\"fetchBrandsByIds exception\", e);\n    return [];\n  }\n}\n\nexport async function fetchProductBySlug(slug: string) {\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"slug\", slug)\n    .maybeSingle(); // ✅ doesn't throw when 0 rows\n\n  if (error) {\n    console.error(\"fetchProductBySlug error:\", { slug, error });\n    throw error; // ✅ stop masking real errors as 404\n  }\n\n  return data as ProductRow | null;\n}\n\nexport async function fetchProductsBySubcategoryId(subcategoryId: number) {\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", subcategoryId)\n    .order(\"id\", { ascending: true });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/**\n * If you don't have subsubcategories yet, you can keep this returning []\n * OR create the table and remove the try/catch.\n */\nexport async function fetchSubSubcategoriesBySubcategoryId(subcategoryId: number) {\n  const { data, error } = await supabase\n    .from(\"subsubcategories\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", subcategoryId)\n    .order(\"id\", { ascending: true });\n\n  // If the table doesn't exist yet, you can return [] instead of throwing.\n  if (error) {\n    // Uncomment next line if you prefer hard-fail:\n    // throw error;\n    return [];\n  }\n  return data ?? [];\n}\n\n/* =========================\n   Product page helpers\n========================= */\n\n\nexport async function fetchSubcategoryById(id: number) {\n  const { data, error } = await supabase.from(\"subcategories\").select(\"*\").eq(\"id\", id).single();\n  if (error) return null;\n  return data;\n}\n\n/**\n * IMPORTANT: object signature (fixes your 22P02 crash).\n */\nexport async function fetchRelatedProducts(args: {\n  subcategoryId: number;\n  excludeProductId: number;\n  limit?: number;\n}) {\n  const limit = args.limit ?? 12;\n\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", args.subcategoryId)\n    .neq(\"id\", args.excludeProductId)\n    .limit(limit);\n\n  if (error) throw error;\n  return data ?? [];\n}\n  \n/* =========================\n   Products / Variants / Images: by ids\n========================= */\n\nexport async function getProductsByIds(ids: number[]) {\n  const unique = Array.from(new Set(ids)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"products\")\n.select(\n  \"id,name,slug,long_description,category_id,subcategory_id,brand_id,is_discounted,base_price,tags,is_active\"\n).in(\"id\", unique);\n\n  if (error) throw error;\n  return (data ?? []) as ProductRow[];\n}\n\nexport async function getVariantsByIds(ids: number[]) {\n  const unique = Array.from(new Set(ids)).filter((x) => x != null) as number[];\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_variants\")\n    .select(\"id,product_id,label,price,stock\")\n    .in(\"id\", unique);\n\n  if (error) throw error;\n  return (data ?? []) as VariantRow[];\n}\n\nexport async function fetchProductsByIds(ids: number[]) {\n  // alias used by some pages\n  return getProductsByIds(ids);\n}\n\nexport async function fetchVariantsByProductIds(productIds: number[]) {\n  const unique = Array.from(new Set(productIds)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_variants\")\n    .select(\"*\")\n    .in(\"product_id\", unique)\n    .order(\"price\", { ascending: true });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchImagesByProductIds(productIds: number[]) {\n  const unique = Array.from(new Set(productIds)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_images\")\n    .select(\"*\")\n    .in(\"product_id\", unique)\n    .order(\"is_primary\", { ascending: false });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Single-ID wrappers (your product page imports these)\n========================= */\n\nexport async function fetchVariantsByProductId(productId: number) {\n  return fetchVariantsByProductIds([productId]);\n}\n\nexport async function fetchImagesByProductId(productId: number) {\n  return fetchImagesByProductIds([productId]);\n}\n\n/* =========================\n   Co-purchase (recommendations)\n========================= */\n\nexport async function fetchBoughtTogetherProductIds(args: {\n  productId: number;\n  limit?: number;\n  excludeIds?: number[];\n}) {\n  const limit = args.limit ?? 12;\n  const exclude = new Set([args.productId, ...(args.excludeIds ?? [])]);\n\n  const { data, error } = await supabase\n    .from(\"copurchase_counts\")\n    .select(\"co_product_id,count\")\n    .eq(\"product_id\", args.productId)\n    .order(\"count\", { ascending: false })\n    .limit(limit * 3);\n\n  if (error) throw error;\n\n  const ids: number[] = [];\n  for (const row of data ?? []) {\n    const id = Number((row as any).co_product_id);\n    if (!exclude.has(id)) ids.push(id);\n    if (ids.length >= limit) break;\n  }\n  return ids;\n}\n\n/* =========================\n   Customers (optional)\n========================= */\n\nexport async function searchCustomers(query: string) {\n  const q = query.trim();\n  if (!q) return [];\n\n  const { data, error } = await supabase\n    .from(\"customers\")\n    .select(\"id,name,phone\")\n    .or(`name.ilike.%${q}%,phone.ilike.%${q}%`)\n    .limit(8);\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Orders (checkout)\n========================= */\n\nexport async function createOrder(args: {\n  customer_id: number | null;\n  delivery: { name: string; phone: string; address: string; note?: string };\n  total_amount: number;\n}) {\n  const { data, error } = await supabase\n    .from(\"orders\")\n    .insert({\n      customer_id: args.customer_id,\n      delivery_name: args.delivery.name,\n      delivery_phone: args.delivery.phone,\n      delivery_address: args.delivery.address,\n      delivery_note: args.delivery.note ?? null,\n      total_amount: args.total_amount,\n      status: \"PENDING\",\n    })\n    .select(\"id\")\n    .single();\n\n  if (error) throw error;\n  return data as { id: number };\n}\n\nexport async function createOrderItems(\n  orderId: number,\n  items: Array<{\n    productId: number;\n    variantId: number | null;\n    qty: number;\n    priceAtPurchase: number;\n  }>\n) {\n  const payload = items.map((it) => ({\n    order_id: orderId,\n    product_id: it.productId,\n    variant_id: it.variantId,\n    quantity: it.qty,\n    price_at_purchase: it.priceAtPurchase,\n  }));\n\n  const { error } = await supabase.from(\"order_items\").insert(payload);\n\n  if (error) {\n    // helpful debugging\n    console.log(\"ORDER_ITEMS_INSERT_ERROR\", error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/product/%5Bslug%5D/page.tsx"],"sourcesContent":["export const dynamic = \"force-dynamic\";\nexport const revalidate = 3600; // rebuild metadata every hour\n\nimport Link from \"next/link\";\nimport { notFound } from \"next/navigation\";\nimport type { Metadata } from \"next\";\nimport AddToCartButton from \"@/components/AddToCartButton\";\nimport ProductClient from \"./product-client\";\nimport BottomNav from \"@/components/BottomNav\";\n\nimport {\n  fetchProductBySlug,\n  fetchVariantsByProductId,\n  fetchImagesByProductId,\n  fetchSubcategoryById,\n  fetchRelatedProducts,\n  fetchBrandsByIds,\n} from \"@/lib/db\";\n\nconst SITE_URL = process.env.NEXT_PUBLIC_SITE_URL || \"https://matomart.so\";\n\nfunction money(n: number) {\n  return `$${Number(n ?? 0).toFixed(2)}`;\n}\n\nfunction safeImg(src: any) {\n  const s = String(src ?? \"\").trim();\n  if (!s) return \"/example.png\";\n  if (s.startsWith(\"/\")) return s;\n  if (s.startsWith(\"http://\") || s.startsWith(\"https://\")) return s;\n  return \"/example.png\";\n}\n\nfunction subLabel(sub: any) {\n  return sub?.name_en ?? sub?.name_so ?? \"Product\";\n}\n\nexport async function generateMetadata({\n  params,\n}: {\n  params: Promise<{ slug: string }>;\n}): Promise<Metadata> {\n  // ✅ Next 16: params is a Promise\n  const { slug } = await params;\n\n  // Get product from Supabase\n  const product = await fetchProductBySlug(slug);\n\n  // Fallback SEO if product not found\n  if (!product) {\n    const canonical = new URL(`/product/${slug}`, SITE_URL).toString();\n\n    const title = \"Alaab lama helin | MatoMart Soomaaliya\";\n    const description =\n      \"Alaabtani lama helin. Ka raadi kumannaan alaab raashin, daryeel iyo guriga ah MatoMart Soomaaliya.\";\n\n    return {\n      title,\n      description,\n      alternates: {\n        canonical,\n      },\n      openGraph: {\n        title,\n        description,\n        type: \"website\", // ✅ must be a valid type\n        url: canonical,\n      },\n      twitter: {\n        card: \"summary_large_image\",\n        title,\n        description,\n      },\n    };\n  }\n\n  // ====== Try to pull subcategory names for bilingual SEO ======\n  let subNameEn: string | undefined;\n  let subNameSo: string | undefined;\n\n  const subId = Number((product as any).subcategory_id);\n  if (Number.isFinite(subId) && subId > 0) {\n    const sub = await fetchSubcategoryById(subId);\n    if (sub) {\n      subNameEn = (sub as any).name_en ?? undefined;\n      subNameSo = (sub as any).name_so ?? undefined;\n    }\n  }\n\n  // ====== Build Somali + English SEO text ======\n  const baseName = product.name; // e.g. \"Baraka Corn Flakes 500g\"\n\n  const subLabelSo =\n    subNameSo || \"Raashin iyo alaabooyin kale oo tayo leh\";\n  const subLabelEn =\n    subNameEn || \"Groceries and daily essentials\";\n\n  const title = `${baseName} | MatoMart Soomaaliya – ${subLabelSo}`;\n  const description =\n    `${baseName} – alaab ka tirsan ${subLabelSo} (${subLabelEn}). ` +\n    `Raashin iyo adeeg tayo leh oo lagu keeno gurigaaga gudaha Soomaaliya. ` +\n    `Order online groceries, baby, health & household items – fast delivery.`;\n\n  // ====== Product image for previews ======\n  const imgs = await fetchImagesByProductId(product.id);\n  const primary = imgs?.find((i: any) => i.is_primary) ?? imgs?.[0];\n  const ogImage = safeImg(primary?.url) || \"/example.png\";\n\n  const canonical = new URL(`/product/${slug}`, SITE_URL).toString();\n  const absoluteOgImage = ogImage.startsWith(\"http\")\n    ? ogImage\n    : new URL(ogImage, SITE_URL).toString();\n\n  return {\n    title,\n    description,\n    alternates: {\n      canonical,\n    },\n    openGraph: {\n      title,\n      description,\n      type: \"website\", // ✅ avoid invalid 'product' type error\n      url: canonical,\n      images: [\n        {\n          url: absoluteOgImage,\n          width: 1200,\n          height: 630,\n          alt: baseName,\n        },\n      ],\n      locale: \"so_SO\",\n    },\n    twitter: {\n      card: \"summary_large_image\",\n      title,\n      description,\n      images: [absoluteOgImage],\n    },\n  };\n}\n\nexport default async function ProductPage({\n  params,\n}: {\n  params: Promise<{ slug: string }>;\n}) {\n  const { slug } = await params;\n\n  const product = await fetchProductBySlug(slug);\n  if (!product) {\n    notFound();\n  }\n\n  // Ensure we only query with valid numeric ids (prevents 22P02 when undefined/null leaks in)\n  const subcategoryId = Number((product as any).subcategory_id);\n  const hasSubcategoryId = Number.isFinite(subcategoryId) && subcategoryId > 0;\n\n  const [variants, images, sub, related, brands] = await Promise.all([\n    fetchVariantsByProductId(product.id),\n    fetchImagesByProductId(product.id),\n    hasSubcategoryId\n      ? fetchSubcategoryById(subcategoryId)\n      : Promise.resolve(null),\n    hasSubcategoryId\n      ? fetchRelatedProducts({\n          subcategoryId,\n          excludeProductId: product.id,\n          limit: 12,\n        })\n      : Promise.resolve([]),\n    fetchBrandsByIds([(product as any).brand_id]),\n  ]);\n\n  const brand = brands?.[0];\n\n  const basePrice = product.base_price ?? 0;\n\n  const firstVariant: any | undefined = (variants as any[])?.[0];\n  const priceValue = firstVariant?.price ?? basePrice ?? 0;\n  const priceDisplay = money(priceValue);\n  const availability =\n    firstVariant &&\n    typeof firstVariant.stock === \"number\" &&\n    firstVariant.stock > 0\n      ? \"https://schema.org/InStock\"\n      : \"https://schema.org/OutOfStock\";\n\n  const primaryImage =\n    images.find((im: any) => im.is_primary) ?? images[0] ?? null;\n\n  const primaryImageUrl = primaryImage ? safeImg(primaryImage.url) : \"\";\n  const absolutePrimaryImage = primaryImageUrl.startsWith(\"http\")\n    ? primaryImageUrl\n    : primaryImageUrl\n    ? new URL(primaryImageUrl, SITE_URL).toString()\n    : \"\";\n  const productUrl = new URL(`/product/${product.slug}`, SITE_URL).toString();\n\n  const jsonLd = {\n    \"@context\": \"https://schema.org/\",\n    \"@type\": \"Product\",\n    name: product.name,\n    image: absolutePrimaryImage ? [absolutePrimaryImage] : [],\n    description:\n      (product as any).long_description ||\n      `${product.name} – alaab raashin iyo adeegyo kale oo laga helo MatoMart Soomaaliya, gaarsiin degdeg ah gudaha Muqdisho & gobollada kale. Order online groceries, baby, health & household items in Somalia.`,\n    brand: brand\n      ? {\n          \"@type\": \"Brand\",\n          name: (brand as any).name,\n        }\n      : undefined,\n    offers: {\n      \"@type\": \"Offer\",\n      priceCurrency: \"USD\",\n      price: priceValue,\n      availability,\n      url: productUrl,\n      itemCondition: \"https://schema.org/NewCondition\",\n    },\n  };\n\n  return (\n    <main className=\"min-h-screen bg-[#F4F6F8] pb-32\">\n      {/* JSON-LD SEO */}\n      <script\n        type=\"application/ld+json\"\n        suppressHydrationWarning\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n      />\n\n      {/* TOP PRODUCT HEADER + CLIENT AREA */}\n      <section className=\"mx-auto max-w-md bg-white border-b\">\n        <div className=\"px-4 pt-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <Link href=\"/\" className=\"text-[#0B6EA9] font-semibold text-sm\">\n              ← Back\n            </Link>\n          </div>\n\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"min-w-0\">\n              <div className=\"text-[#0B6EA9] text-sm font-semibold\">\n                {subLabel(sub)}\n              </div>\n\n              <h1 className=\"mt-1 text-sm font-semibold text-gray-900 leading-snug\">\n                {product.name}\n              </h1>\n\n              <div className=\"mt-2 flex items-center gap-2 text-sm text-gray-700\">\n                <span className=\"text-yellow-500\">★★★★☆</span>\n                <span className=\"text-gray-500\">971</span>\n                <span className=\"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-orange-100 text-orange-700\">\n                  Trending\n                </span>\n              </div>\n            </div>\n\n            <button className=\"h-10 w-10 rounded-full border bg-white grid place-items-center text-gray-600\">\n              ♡\n            </button>\n          </div>\n        </div>\n\n        <ProductClient\n          productId={product.id}\n          productName={product.name}\n          basePrice={basePrice}\n          variants={variants}\n          images={images}\n        />\n      </section>\n\n      {/* PRODUCT DETAILS (no return policy / article id) */}\n      <section className=\"mx-auto max-w-md bg-white mt-2 border-t border-b\">\n        <div className=\"px-4 py-4\">\n          <div className=\"text-base font-semibold text-gray-900\">\n            Product Details\n          </div>\n          <p className=\"mt-2 text-sm text-gray-700 leading-relaxed\">\n            {(product as any).long_description ||\n              (product as any).description ||\n              \"No description available.\"}\n          </p>\n        </div>\n      </section>\n\n      {/* RELATED PRODUCTS */}\n      <section className=\"mx-auto max-w-md bg-white mt-2 border-t border-b\">\n        <div className=\"px-4 py-4 flex items-center justify-between\">\n          <div className=\"text-base font-semibold text-gray-900\">\n            You may also like\n          </div>\n        </div>\n\n        <div className=\"px-4 pb-4 overflow-x-auto\">\n          <div className=\"flex gap-3\">\n            {related.map((p: any) => {\n              const img =\n                images.find(\n                  (im: any) => im.product_id === p.id && im.is_primary\n                )?.url ||\n                images.find((im: any) => im.product_id === p.id)?.url ||\n                \"/example.png\";\n\n              const price = p.base_price ?? 0;\n\n              return (\n                <div\n                  key={p.id}\n                  className=\"min-w-[155px] bg-white border rounded-2xl overflow-hidden shadow-sm\"\n                >\n                  <div className=\"p-2 flex justify-end text-gray-500\">♡</div>\n\n                  <Link href={`/product/${p.slug}`} className=\"block px-3\">\n                    {/* eslint-disable-next-line @next/next/no-img-element */}\n                    <img\n                      src={safeImg(img)}\n                      alt={p.name}\n                      className=\"mx-auto h-28 w-auto object-contain\"\n                    />\n                  </Link>\n\n                  <div className=\"px-3 pb-3\">\n                    <div className=\"text-[11px] text-gray-500\">Sponsored</div>\n                    <div className=\"text-[12px] font-medium text-gray-900 line-clamp-2 min-h-[32px]\">\n                      {p.name}\n                    </div>\n\n                    <div className=\"mt-1 flex items-end gap-2\">\n                      <div className=\"font-extrabold text-gray-900 text-sm\">\n                        {money(price)}\n                      </div>\n                    </div>\n\n                    <div className=\"h-[14px]\" />\n                    {/* <AddToCartButton productId={p.id} /> */}\n                  </div>\n                </div>\n              );\n            })}\n\n            {related.length === 0 && (\n              <div className=\"text-sm text-gray-600\">\n                No related products yet.\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n\n      {/* Sticky Add to Cart bar above bottom nav */}\n      <section className=\"fixed inset-x-0 bottom-[90px] z-40 border-t bg-white\">\n        <div className=\"mx-auto max-w-md px-4 py-3 flex items-center justify-between gap-4\">\n          <div className=\"flex flex-col\">\n            <span className=\"text-[11px] text-gray-500\">Price</span>\n            <span className=\"text-lg font-extrabold text-gray-900\">\n              {priceDisplay}\n            </span>\n          </div>\n          <div className=\"flex-1 flex justify-end\">\n            {/* This button shows:\n                - \"Add +\" when not in cart\n                - \"-  qty  +\" when in cart\n               Quantity styling (big, bold, black, spaced out) is handled inside AddToCartButton.tsx\n            */}\n            <AddToCartButton productId={product.id} />\n          </div>\n        </div>\n      </section>\n\n      <BottomNav />\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}