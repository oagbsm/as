{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/localOrders.ts"],"sourcesContent":["export type PaymentMethod =\n  | \"EVC\"\n  | \"MERCHANT\"\n  | \"EDAHAB\"\n  | \"PREMIER_WALLET\"\n  | \"AMTEL\";\n\nexport type LocalOrderItem = {\n  productId: number;\n  variantId: number | null;\n  qty: number;\n  unitPrice: number;\n  lineTotal: number;\n  name: string; // includes variant label e.g. \"Basmati Rice (5 kg)\"\n};\n\nexport type LocalOrder = {\n  id: string;\n  createdAt: string; // ISO\n  channel: \"local\";\n\n  customer: { id: number; name: string; phone: string } | null;\n\n  note?: string;\n\n  subtotal: number;\n  deliveryFee: number;\n  total: number;\n\n  // NEW\n  isCredit: boolean;              // true = unpaid credit\n  isPaid: boolean;                // false when credit\n  paymentMethod: PaymentMethod | null; // only when paid (or non-credit)\n  paidAt?: string;                // when marked paid\n\n  items: LocalOrderItem[];\n};\n\nexport type CreditLedgerRow = {\n  customerId: number;\n  name: string;\n  phone: string;\n  outstanding: number; // current due\n  lastOrderAt: string; // ISO\n};\n\nconst ORDERS_KEY = \"local_orders_v2\";\nconst CREDIT_KEY = \"credit_ledger_v1\";\n\n/* ===== Orders ===== */\nexport function readLocalOrders(): LocalOrder[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(ORDERS_KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writeLocalOrders(orders: LocalOrder[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));\n}\n\nexport function saveLocalOrder(order: LocalOrder) {\n  const all = readLocalOrders();\n  all.unshift(order);\n  writeLocalOrders(all);\n}\n\nexport function updateLocalOrder(orderId: string, patch: Partial<LocalOrder>) {\n  const all = readLocalOrders();\n  const idx = all.findIndex((o) => o.id === orderId);\n  if (idx === -1) return;\n  all[idx] = { ...all[idx], ...patch };\n  writeLocalOrders(all);\n}\n\nexport function clearLocalOrders() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(ORDERS_KEY);\n}\n\n/* ===== Credit ledger ===== */\nexport function readCreditLedger(): CreditLedgerRow[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(CREDIT_KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writeCreditLedger(rows: CreditLedgerRow[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(CREDIT_KEY, JSON.stringify(rows));\n}\n\nexport function addCredit(customer: { id: number; name: string; phone: string }, amount: number) {\n  const rows = readCreditLedger();\n  const idx = rows.findIndex((r) => r.customerId === customer.id);\n  const now = new Date().toISOString();\n\n  if (idx === -1) {\n    rows.unshift({\n      customerId: customer.id,\n      name: customer.name,\n      phone: customer.phone,\n      outstanding: Number(amount || 0),\n      lastOrderAt: now,\n    });\n  } else {\n    rows[idx] = {\n      ...rows[idx],\n      outstanding: Number(rows[idx].outstanding || 0) + Number(amount || 0),\n      lastOrderAt: now,\n    };\n  }\n  writeCreditLedger(rows);\n}\n\nexport function payCredit(customerId: number, amount: number) {\n  const rows = readCreditLedger();\n  const idx = rows.findIndex((r) => r.customerId === customerId);\n  if (idx === -1) return;\n\n  const newOutstanding = Math.max(0, Number(rows[idx].outstanding || 0) - Number(amount || 0));\n  rows[idx] = { ...rows[idx], outstanding: newOutstanding };\n  writeCreditLedger(rows);\n}\n\nexport function totalCreditDue(): number {\n  return readCreditLedger().reduce((sum, r) => sum + Number(r.outstanding || 0), 0);\n}\n\nexport function clearCreditLedger() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(CREDIT_KEY);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA8CA,MAAM,aAAa;AACnB,MAAM,aAAa;AAGZ,SAAS;IACd,wCAAmC,OAAO,EAAE;;;AAM9C;AAEO,SAAS,iBAAiB,MAAoB;IACnD,wCAAmC;;;AAErC;AAEO,SAAS,eAAe,KAAiB;IAC9C,MAAM,MAAM;IACZ,IAAI,OAAO,CAAC;IACZ,iBAAiB;AACnB;AAEO,SAAS,iBAAiB,OAAe,EAAE,KAA0B;IAC1E,MAAM,MAAM;IACZ,MAAM,MAAM,IAAI,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC1C,IAAI,QAAQ,CAAC,GAAG;IAChB,GAAG,CAAC,IAAI,GAAG;QAAE,GAAG,GAAG,CAAC,IAAI;QAAE,GAAG,KAAK;IAAC;IACnC,iBAAiB;AACnB;AAEO,SAAS;IACd,wCAAmC;;;AAErC;AAGO,SAAS;IACd,wCAAmC,OAAO,EAAE;;;AAM9C;AAEO,SAAS,kBAAkB,IAAuB;IACvD,wCAAmC;;;AAErC;AAEO,SAAS,UAAU,QAAqD,EAAE,MAAc;IAC7F,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,SAAS,EAAE;IAC9D,MAAM,MAAM,IAAI,OAAO,WAAW;IAElC,IAAI,QAAQ,CAAC,GAAG;QACd,KAAK,OAAO,CAAC;YACX,YAAY,SAAS,EAAE;YACvB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,KAAK;YACrB,aAAa,OAAO,UAAU;YAC9B,aAAa;QACf;IACF,OAAO;QACL,IAAI,CAAC,IAAI,GAAG;YACV,GAAG,IAAI,CAAC,IAAI;YACZ,aAAa,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,OAAO,UAAU;YACnE,aAAa;QACf;IACF;IACA,kBAAkB;AACpB;AAEO,SAAS,UAAU,UAAkB,EAAE,MAAc;IAC1D,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;IACnD,IAAI,QAAQ,CAAC,GAAG;IAEhB,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,OAAO,UAAU;IACzF,IAAI,CAAC,IAAI,GAAG;QAAE,GAAG,IAAI,CAAC,IAAI;QAAE,aAAa;IAAe;IACxD,kBAAkB;AACpB;AAEO,SAAS;IACd,OAAO,mBAAmB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,OAAO,EAAE,WAAW,IAAI,IAAI;AACjF;AAEO,SAAS;IACd,wCAAmC;;;AAErC"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/payments.ts"],"sourcesContent":["export type PaymentMethod =\n  | \"EVC\"\n  | \"MERCHANT\"\n  | \"EDAHAB\"\n  | \"PREMIER_WALLET\"\n  | \"AMTEL\";\n\nexport type PaymentSource = \"SALE\" | \"CREDIT_PAYMENT\" | \"CREDIT_SETTLEMENT\";\n\nexport type PaymentRecord = {\n  id: string; // PAY-...\n  createdAt: string; // ISO\n  method: PaymentMethod;\n  amount: number;\n\n  source: PaymentSource;\n\n  // optional linking\n  orderId?: string;\n  customer?: { id: number; name: string; phone: string };\n\n  note?: string;\n};\n\nconst KEY = \"payments_ledger_v1\";\n\nexport function readPayments(): PaymentRecord[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function writePayments(rows: PaymentRecord[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(KEY, JSON.stringify(rows));\n}\n\nexport function recordPayment(p: Omit<PaymentRecord, \"id\" | \"createdAt\">) {\n  const rows = readPayments();\n  rows.unshift({\n    id: `PAY-${Date.now()}`,\n    createdAt: new Date().toISOString(),\n    ...p,\n    amount: Number(p.amount || 0),\n  });\n  writePayments(rows);\n}\n\nexport function clearPayments() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(KEY);\n}\n"],"names":[],"mappings":";;;;;;;;;;AAwBA,MAAM,MAAM;AAEL,SAAS;IACd,wCAAmC,OAAO,EAAE;;;AAM9C;AAEO,SAAS,cAAc,IAAqB;IACjD,wCAAmC;;;AAErC;AAEO,SAAS,cAAc,CAA0C;IACtE,MAAM,OAAO;IACb,KAAK,OAAO,CAAC;QACX,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;QACvB,WAAW,IAAI,OAAO,WAAW;QACjC,GAAG,CAAC;QACJ,QAAQ,OAAO,EAAE,MAAM,IAAI;IAC7B;IACA,cAAc;AAChB;AAEO,SAAS;IACd,wCAAmC;;;AAErC"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { supabase } from \"@/lib/supabaseClient\";\n\n/* =========================\n   Helpers\n========================= */\n\nexport function safeImg(src: any) {\n  const s = String(src ?? \"\").trim();\n  if (!s) return \"/example.png\";\n  if (s.startsWith(\"/\")) return s;\n  if (s.startsWith(\"http://\") || s.startsWith(\"https://\")) return s;\n  return \"/example.png\";\n}\n\n/* =========================\n   Types\n========================= */\n\ntype CategoryRow = {\n  id: number;\n  slug: string;\n  img: string | null;\n  name_so: string;\n  name_en: string;\n};\n\ntype SubcategoryRow = {\n  id: number;\n  category_id: number;\n  slug: string;\n  img: string | null;\n  name_so: string;\n  name_en: string;\n};\n\nexport type ProductRow = {\n  id: number;\n  name: string;\n  slug: string;\n  base_price: number; // numeric NOT NULL in DB\n  long_description: string; // NOT NULL in DB\n  category_id: number;\n  subcategory_id: number;\n  brand_id: number;\n  is_discounted: boolean;\n  tags?: string[] | null;\n  is_active: boolean;\n};\nexport type VariantRow = {\n  id: number;\n  product_id: number;\n  label: string;\n  price: number;\n\n  // optional if you track stock\n  stock?: number | null;\n};\n\n/* =========================\n   Home (categories + subcats)\n========================= */\n\nexport async function getCategoriesWithSubcategories() {\n  const { data: cats, error: catErr } = await supabase\n    .from(\"categories\")\n    .select(\"id,slug,img,name_so,name_en\")\n    .order(\"id\", { ascending: true });\n\n  if (catErr) throw catErr;\n\n  const { data: subs, error: subErr } = await supabase\n    .from(\"subcategories\")\n    .select(\"id,category_id,slug,img,name_so,name_en\")\n    .order(\"id\", { ascending: true });\n\n  if (subErr) throw subErr;\n\n  const categories = (cats ?? []) as CategoryRow[];\n  const subcategories = (subs ?? []) as SubcategoryRow[];\n\n  return categories.map((cat) => ({\n    ...cat,\n    subcats: subcategories.filter((s) => s.category_id === cat.id),\n  }));\n}\n\n/* =========================\n   Search page: fetch everything\n========================= */\n\nexport async function fetchAllCategories() {\n  const { data, error } = await supabase.from(\"categories\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllSubcategories() {\n  const { data, error } = await supabase.from(\"subcategories\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProducts() {\n  const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProductVariants() {\n  const { data, error } = await supabase.from(\"product_variants\").select(\"*\").order(\"id\");\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchAllProductImages() {\n  const { data, error } = await supabase\n    .from(\"product_images\")\n    .select(\"*\")\n    .order(\"is_primary\", { ascending: false });\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Subcategory page helpers\n========================= */\n\nexport async function fetchSubcategoryBySlug(slug: string) {\n  const { data, error } = await supabase\n    .from(\"subcategories\")\n    .select(\"*\")\n    .eq(\"slug\", slug)\n    .maybeSingle();\n\n  if (error) {\n    console.error(\"fetchSubcategoryBySlug error:\", { slug, error });\n    throw error;\n  }\n\n  return data;\n}\nexport async function fetchBrandsByIds(ids: number[]) {\n  try {\n    const clean = Array.from(\n      new Set((ids || []).map((x) => Number(x)).filter((n) => Number.isFinite(n)))\n    );\n    if (!clean.length) return [];\n\n    const { data, error } = await supabase\n      .from(\"brands\")\n      .select(\"id,name,slug\")\n      .in(\"id\", clean)\n      .order(\"name\", { ascending: true });\n\n    if (error) {\n      console.error(\"fetchBrandsByIds error\", error);\n      return [];\n    }\n\n    return data ?? [];\n  } catch (e) {\n    console.error(\"fetchBrandsByIds exception\", e);\n    return [];\n  }\n}\n\nexport async function fetchProductBySlug(slug: string) {\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"slug\", slug)\n    .maybeSingle(); // âœ… doesn't throw when 0 rows\n\n  if (error) {\n    console.error(\"fetchProductBySlug error:\", { slug, error });\n    throw error; // âœ… stop masking real errors as 404\n  }\n\n  return data as ProductRow | null;\n}\n\nexport async function fetchProductsBySubcategoryId(subcategoryId: number) {\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", subcategoryId)\n    .order(\"id\", { ascending: true });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/**\n * If you don't have subsubcategories yet, you can keep this returning []\n * OR create the table and remove the try/catch.\n */\nexport async function fetchSubSubcategoriesBySubcategoryId(subcategoryId: number) {\n  const { data, error } = await supabase\n    .from(\"subsubcategories\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", subcategoryId)\n    .order(\"id\", { ascending: true });\n\n  // If the table doesn't exist yet, you can return [] instead of throwing.\n  if (error) {\n    // Uncomment next line if you prefer hard-fail:\n    // throw error;\n    return [];\n  }\n  return data ?? [];\n}\n\n/* =========================\n   Product page helpers\n========================= */\n\n\nexport async function fetchSubcategoryById(id: number) {\n  const { data, error } = await supabase.from(\"subcategories\").select(\"*\").eq(\"id\", id).single();\n  if (error) return null;\n  return data;\n}\n\n/**\n * IMPORTANT: object signature (fixes your 22P02 crash).\n */\nexport async function fetchRelatedProducts(args: {\n  subcategoryId: number;\n  excludeProductId: number;\n  limit?: number;\n}) {\n  const limit = args.limit ?? 12;\n\n  const { data, error } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"subcategory_id\", args.subcategoryId)\n    .neq(\"id\", args.excludeProductId)\n    .limit(limit);\n\n  if (error) throw error;\n  return data ?? [];\n}\n  \n/* =========================\n   Products / Variants / Images: by ids\n========================= */\n\nexport async function getProductsByIds(ids: number[]) {\n  const unique = Array.from(new Set(ids)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"products\")\n.select(\n  \"id,name,slug,long_description,category_id,subcategory_id,brand_id,is_discounted,base_price,tags,is_active\"\n).in(\"id\", unique);\n\n  if (error) throw error;\n  return (data ?? []) as ProductRow[];\n}\n\nexport async function getVariantsByIds(ids: number[]) {\n  const unique = Array.from(new Set(ids)).filter((x) => x != null) as number[];\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_variants\")\n    .select(\"id,product_id,label,price,stock\")\n    .in(\"id\", unique);\n\n  if (error) throw error;\n  return (data ?? []) as VariantRow[];\n}\n\nexport async function fetchProductsByIds(ids: number[]) {\n  // alias used by some pages\n  return getProductsByIds(ids);\n}\n\nexport async function fetchVariantsByProductIds(productIds: number[]) {\n  const unique = Array.from(new Set(productIds)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_variants\")\n    .select(\"*\")\n    .in(\"product_id\", unique)\n    .order(\"price\", { ascending: true });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\nexport async function fetchImagesByProductIds(productIds: number[]) {\n  const unique = Array.from(new Set(productIds)).filter(Boolean);\n  if (unique.length === 0) return [];\n\n  const { data, error } = await supabase\n    .from(\"product_images\")\n    .select(\"*\")\n    .in(\"product_id\", unique)\n    .order(\"is_primary\", { ascending: false });\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Single-ID wrappers (your product page imports these)\n========================= */\n\nexport async function fetchVariantsByProductId(productId: number) {\n  return fetchVariantsByProductIds([productId]);\n}\n\nexport async function fetchImagesByProductId(productId: number) {\n  return fetchImagesByProductIds([productId]);\n}\n\n/* =========================\n   Co-purchase (recommendations)\n========================= */\n\nexport async function fetchBoughtTogetherProductIds(args: {\n  productId: number;\n  limit?: number;\n  excludeIds?: number[];\n}) {\n  const limit = args.limit ?? 12;\n  const exclude = new Set([args.productId, ...(args.excludeIds ?? [])]);\n\n  const { data, error } = await supabase\n    .from(\"copurchase_counts\")\n    .select(\"co_product_id,count\")\n    .eq(\"product_id\", args.productId)\n    .order(\"count\", { ascending: false })\n    .limit(limit * 3);\n\n  if (error) throw error;\n\n  const ids: number[] = [];\n  for (const row of data ?? []) {\n    const id = Number((row as any).co_product_id);\n    if (!exclude.has(id)) ids.push(id);\n    if (ids.length >= limit) break;\n  }\n  return ids;\n}\n\n/* =========================\n   Customers (optional)\n========================= */\n\nexport async function searchCustomers(query: string) {\n  const q = query.trim();\n  if (!q) return [];\n\n  const { data, error } = await supabase\n    .from(\"customers\")\n    .select(\"id,name,phone\")\n    .or(`name.ilike.%${q}%,phone.ilike.%${q}%`)\n    .limit(8);\n\n  if (error) throw error;\n  return data ?? [];\n}\n\n/* =========================\n   Orders (checkout)\n========================= */\n\nexport async function createOrder(args: {\n  customer_id: number | null;\n  delivery: { name: string; phone: string; address: string; note?: string };\n  total_amount: number;\n}) {\n  const { data, error } = await supabase\n    .from(\"orders\")\n    .insert({\n      customer_id: args.customer_id,\n      delivery_name: args.delivery.name,\n      delivery_phone: args.delivery.phone,\n      delivery_address: args.delivery.address,\n      delivery_note: args.delivery.note ?? null,\n      total_amount: args.total_amount,\n      status: \"PENDING\",\n    })\n    .select(\"id\")\n    .single();\n\n  if (error) throw error;\n  return data as { id: number };\n}\n\nexport async function createOrderItems(\n  orderId: number,\n  items: Array<{\n    productId: number;\n    variantId: number | null;\n    qty: number;\n    priceAtPurchase: number;\n  }>\n) {\n  const payload = items.map((it) => ({\n    order_id: orderId,\n    product_id: it.productId,\n    variant_id: it.variantId,\n    quantity: it.qty,\n    price_at_purchase: it.priceAtPurchase,\n  }));\n\n  const { error } = await supabase.from(\"order_items\").insert(payload);\n\n  if (error) {\n    // helpful debugging\n    console.log(\"ORDER_ITEMS_INSERT_ERROR\", error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/cart/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nimport { useCart } from \"@/context/CartContext\";\nimport { useOrderMode } from \"@/context/OrderModeContext\";\n\nimport {\n  saveLocalOrder,\n  addCredit,\n  totalCreditDue,\n  type PaymentMethod,\n  type LocalOrder,\n} from \"@/lib/localOrders\";\n\nimport { recordPayment } from \"@/lib/payments\";\n\nimport {\n  fetchProductsByIds,\n  fetchVariantsByProductIds,\n  fetchImagesByProductIds,\n  searchCustomers,\n  safeImg,\n} from \"@/lib/db\";\n\ntype CartItem = { productId: number; variantId: number | null; qty: number };\n\nfunction formatGBP(n: number) {\n  return new Intl.NumberFormat(\"en-GB\", { style: \"currency\", currency: \"GBP\" }).format(\n    Number(n || 0)\n  );\n}\n\nconst PRIMARY_METHODS: PaymentMethod[] = [\"EVC\", \"MERCHANT\", \"EDAHAB\"];\nconst MORE_METHODS: PaymentMethod[] = [\"PREMIER_WALLET\", \"AMTEL\"];\n\nfunction labelPM(m: PaymentMethod) {\n  if (m === \"EVC\") return \"EVC\";\n  if (m === \"MERCHANT\") return \"Merchant\";\n  if (m === \"EDAHAB\") return \"E-Dahab\";\n  if (m === \"PREMIER_WALLET\") return \"Premier Wallet\";\n  return \"Amtel\";\n}\n\nexport default function CartPage() {\n  const { mode } = useOrderMode();\n\n  // cart expects variant-safe items:\n  // items: { productId, variantId, qty }[]\n  // setQty(productId, variantId, qty)\n  // removeItem(productId, variantId)\n  const { items, setQty, removeItem, clearCart } = useCart();\n  const cartItems: CartItem[] = Array.isArray(items) ? (items as any) : [];\n\n  // âœ… supabase-loaded catalog bits for cart rendering\n  const [products, setProducts] = useState<any[]>([]);\n  const [productVariants, setProductVariants] = useState<any[]>([]);\n  const [productImages, setProductImages] = useState<any[]>([]);\n\n  // Local order fields\n  const [customerQuery, setCustomerQuery] = useState(\"\");\n  const [selectedCustomer, setSelectedCustomer] = useState<\n    null | { id: number; name: string; phone: string }\n  >(null);\n\n  const [note, setNote] = useState(\"Local minimart order (test)\");\n\n  const [isCredit, setIsCredit] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState<PaymentMethod>(\"EVC\");\n  const [showMorePayments, setShowMorePayments] = useState(false);\n\n  const [savedMsg, setSavedMsg] = useState<string | null>(null);\n  const [creditDue, setCreditDue] = useState<number>(0);\n\n  // âœ… Load just what cart needs (based on current cart items)\n  useEffect(() => {\n    const ids = Array.from(new Set(cartItems.map((x) => x.productId)));\n    if (!ids.length) {\n      setProducts([]);\n      setProductVariants([]);\n      setProductImages([]);\n      return;\n    }\n\n    (async () => {\n      const prods = await fetchProductsByIds(ids);\n      const [vars, imgs] = await Promise.all([\n        fetchVariantsByProductIds(ids),\n        fetchImagesByProductIds(ids),\n      ]);\n\n      setProducts(prods);\n      setProductVariants(vars);\n      setProductImages(imgs);\n    })();\n  }, [cartItems]);\n\n  // âœ… reset local-only state when switching to ONLINE (clean UX)\n  useEffect(() => {\n    if (mode === \"online\") {\n      setCustomerQuery(\"\");\n      setSelectedCustomer(null);\n      setNote(\"\");\n      setIsCredit(false);\n      setPaymentMethod(\"EVC\");\n      setShowMorePayments(false);\n      setSavedMsg(null);\n      setCreditDue(0);\n    } else {\n      setCreditDue(totalCreditDue());\n      if (!note) setNote(\"Local minimart order (test)\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mode]);\n\n  useEffect(() => {\n    if (mode === \"local\") setCreditDue(totalCreditDue());\n  }, [mode, savedMsg]);\n\n  useEffect(() => {\n    if (!savedMsg) return;\n    const t = setTimeout(() => setSavedMsg(null), 1500);\n    return () => clearTimeout(t);\n  }, [savedMsg]);\n\n  // ===== helpers (now backed by supabase arrays) =====\n  function getVariantLabel(variantId: number | null) {\n    if (variantId == null) return null;\n    return productVariants.find((v: any) => v.id === variantId)?.label ?? null;\n  }\n\n  function getVariantPrice(productId: number, variantId: number | null, basePrice: number) {\n    if (variantId == null) return Number(basePrice ?? 0);\n    const v = productVariants.find(\n      (vv: any) => vv.product_id === productId && vv.id === variantId\n    );\n    return Number(v?.price ?? basePrice ?? 0);\n  }\n\n  function getVariantImageUrl(productId: number, variantId: number | null) {\n    // optional: if you later add variant_id to product_images, this will work automatically\n    if (variantId != null) {\n      const img = productImages.find(\n        (im: any) => im.product_id === productId && im.variant_id === variantId\n      )?.url;\n      if (img) return safeImg(img);\n    }\n\n    const primary = productImages.find((im: any) => im.product_id === productId && im.is_primary)\n      ?.url;\n    const anyImg = productImages.find((im: any) => im.product_id === productId)?.url;\n\n    return safeImg(primary || anyImg || \"/example.png\");\n  }\n\n  // âœ… Suggestions now come from Supabase `customers` table\n  const [suggestions, setSuggestions] = useState<any[]>([]);\n  useEffect(() => {\n    if (mode !== \"local\") {\n      setSuggestions([]);\n      return;\n    }\n    const q = customerQuery.trim();\n    if (!q || selectedCustomer) {\n      setSuggestions([]);\n      return;\n    }\n\n    const t = setTimeout(() => {\n      searchCustomers(q)\n        .then((rows) => setSuggestions(rows))\n        .catch(() => setSuggestions([]));\n    }, 150);\n\n    return () => clearTimeout(t);\n  }, [mode, customerQuery, selectedCustomer]);\n\n  const rows = useMemo(() => {\n    return cartItems\n      .map((ci) => {\n        const p: any = products.find((x: any) => x.id === ci.productId);\n        if (!p) return null;\n\n        const basePrice = Number(p?.base_price ?? 0);\n        const price = getVariantPrice(ci.productId, ci.variantId ?? null, basePrice);\n\n        const vLabel = getVariantLabel(ci.variantId ?? null);\n        const name = vLabel ? `${p.name} (${vLabel})` : p.name;\n\n        const img = getVariantImageUrl(ci.productId, ci.variantId ?? null);\n        const qty = Number(ci.qty ?? 1);\n\n        return {\n          ci,\n          name,\n          img,\n          price,\n          qty,\n          lineTotal: price * qty,\n          key: `${ci.productId}-${ci.variantId ?? \"base\"}`,\n        };\n      })\n      .filter(Boolean) as any[];\n  }, [cartItems, products, productVariants, productImages]);\n\n  const subtotal = useMemo(\n    () => rows.reduce((sum, r) => sum + (r?.lineTotal ?? 0), 0),\n    [rows]\n  );\n\n  const deliveryFee = mode === \"local\" ? 0 : subtotal > 0 ? 1.99 : 0;\n  const total = subtotal + deliveryFee;\n  const canCheckout = rows.length > 0;\n\n  async function checkoutLocal() {\n    if (!canCheckout) return;\n\n    if (isCredit && !selectedCustomer) {\n      alert(\"Select a customer for credit orders (name/phone).\");\n      return;\n    }\n\n    const order: LocalOrder = {\n      id: `LO-${Date.now()}`,\n      createdAt: new Date().toISOString(),\n      channel: \"local\",\n      customer: selectedCustomer,\n      note: note?.trim() || undefined,\n      subtotal,\n      deliveryFee,\n      total,\n\n      isCredit,\n      isPaid: !isCredit,\n      paymentMethod: isCredit ? null : paymentMethod,\n\n      items: rows.map((r: any) => ({\n        productId: r.ci.productId,\n        variantId: r.ci.variantId ?? null,\n        qty: r.qty,\n        unitPrice: r.price,\n        lineTotal: r.lineTotal,\n        name: r.name,\n      })),\n    };\n\n    saveLocalOrder(order);\n\n    if (isCredit && selectedCustomer) {\n      addCredit(selectedCustomer, total);\n      setSavedMsg(\"âœ… Credit order saved\");\n    } else {\n      recordPayment({\n        source: \"SALE\",\n        method: paymentMethod,\n        amount: total,\n        orderId: order.id,\n        customer: selectedCustomer ?? undefined,\n        note: \"Local paid sale\",\n      });\n      setSavedMsg(\"âœ… Paid order saved\");\n    }\n\n    clearCart();\n\n    setCustomerQuery(\"\");\n    setSelectedCustomer(null);\n    setIsCredit(false);\n    setPaymentMethod(\"EVC\");\n    setShowMorePayments(false);\n  }\n\n  return (\n    <main className=\"min-h-screen bg-white text-black\">\n      {/* âœ… Local-only panel */}\n      {mode === \"local\" ? (\n        <div className=\"max-w-6xl mx-auto px-4 pt-4\">\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"rounded-xl border bg-[#FFF7ED] px-3 py-2 text-sm flex items-center justify-between\">\n              <div className=\"font-semibold text-orange-800\">Credits due</div>\n              <div className=\"font-extrabold text-orange-900\">{formatGBP(creditDue)}</div>\n            </div>\n\n            <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <div className=\"relative\">\n                <label className=\"text-xs text-gray-600\">Customer (type name or phone)</label>\n                <input\n                  value={\n                    selectedCustomer\n                      ? `${selectedCustomer.name} â€¢ ${selectedCustomer.phone}`\n                      : customerQuery\n                  }\n                  onChange={(e) => {\n                    setSelectedCustomer(null);\n                    setCustomerQuery(e.target.value);\n                  }}\n                  placeholder=\"e.g. Hodan / 0622\"\n                  className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n                />\n\n                {!selectedCustomer && suggestions.length > 0 ? (\n                  <div className=\"absolute z-30 mt-2 w-full border bg-white rounded-xl shadow overflow-hidden\">\n                    {suggestions.map((c: any) => (\n                      <button\n                        key={c.id}\n                        onClick={() => {\n                          setSelectedCustomer(c);\n                          setCustomerQuery(\"\");\n                        }}\n                        className=\"w-full px-3 py-2 text-left hover:bg-gray-50\"\n                      >\n                        <div className=\"text-sm font-semibold\">{c.name}</div>\n                        <div className=\"text-xs text-gray-600\">{c.phone}</div>\n                      </button>\n                    ))}\n                  </div>\n                ) : null}\n\n                {selectedCustomer ? (\n                  <button\n                    onClick={() => {\n                      setSelectedCustomer(null);\n                      setCustomerQuery(\"\");\n                    }}\n                    className=\"mt-2 text-xs text-blue-600 hover:underline\"\n                  >\n                    Change customer\n                  </button>\n                ) : (\n                  <div className=\"mt-2 text-xs text-gray-500\">\n                    Optional: walk-in (not for credit).\n                  </div>\n                )}\n              </div>\n\n              <div>\n                <label className=\"text-xs text-gray-600\">Staff note (optional)</label>\n                <input\n                  value={note}\n                  onChange={(e) => setNote(e.target.value)}\n                  className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n                  placeholder=\"e.g. delivery later\"\n                />\n                {savedMsg ? (\n                  <div className=\"mt-2 text-xs text-green-700 font-semibold\">{savedMsg}</div>\n                ) : null}\n              </div>\n\n              <div className=\"md:col-span-2 flex items-center justify-between border rounded-xl px-3 py-3\">\n                <div>\n                  <div className=\"font-semibold\">Credit</div>\n                  <div className=\"text-xs text-gray-600\">\n                    Tick if customer pays later (requires customer selected).\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => setIsCredit((v) => !v)}\n                  className={`h-9 px-4 rounded-full border text-sm font-semibold ${\n                    isCredit ? \"border-red-600 bg-red-50 text-red-700\" : \"bg-white\"\n                  }`}\n                >\n                  {isCredit ? \"Credit: ON\" : \"Credit: OFF\"}\n                </button>\n              </div>\n\n              {!isCredit ? (\n                <div className=\"md:col-span-2\">\n                  <div className=\"text-xs text-gray-600 mb-2\">Payment method</div>\n\n                  <div className=\"flex flex-wrap gap-2\">\n                    {PRIMARY_METHODS.map((m) => {\n                      const active = paymentMethod === m;\n                      return (\n                        <button\n                          key={m}\n                          onClick={() => setPaymentMethod(m)}\n                          className={`h-9 px-4 rounded-full border text-sm font-semibold ${\n                            active ? \"border-[#0B6EA9] bg-[#EAF4FB] text-[#0B6EA9]\" : \"bg-white\"\n                          }`}\n                        >\n                          {labelPM(m)}\n                        </button>\n                      );\n                    })}\n\n                    <button\n                      onClick={() => setShowMorePayments((v) => !v)}\n                      className=\"h-9 px-4 rounded-full border text-sm font-semibold bg-white\"\n                    >\n                      {showMorePayments ? \"Show less\" : \"Show more\"}\n                    </button>\n\n                    {showMorePayments\n                      ? MORE_METHODS.map((m) => {\n                          const active = paymentMethod === m;\n                          return (\n                            <button\n                              key={m}\n                              onClick={() => setPaymentMethod(m)}\n                              className={`h-9 px-4 rounded-full border text-sm font-semibold ${\n                                active ? \"border-[#0B6EA9] bg-[#EAF4FB] text-[#0B6EA9]\" : \"bg-white\"\n                              }`}\n                            >\n                              {labelPM(m)}\n                            </button>\n                          );\n                        })\n                      : null}\n                  </div>\n                </div>\n              ) : null}\n            </div>\n\n            <div className=\"mt-4 flex flex-wrap gap-2\">\n              <Link\n                href=\"/orders\"\n                className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\"\n              >\n                Orders\n              </Link>\n              <Link\n                href=\"/payments\"\n                className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\"\n              >\n                Payments\n              </Link>\n              <Link\n                href=\"/credits\"\n                className=\"h-9 px-3 rounded-full border text-sm font-semibold hover:bg-gray-50\"\n              >\n                Credits\n              </Link>\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {/* Cart items + summary */}\n      <div className=\"max-w-6xl mx-auto px-4 py-6 grid grid-cols-1 lg:grid-cols-[1.6fr_0.9fr] gap-6\">\n        <section className=\"bg-white\">\n          {rows.length === 0 ? (\n            <div className=\"border rounded-2xl p-8 text-center\">\n              <p className=\"text-lg font-semibold\">Your cart is empty</p>\n              <p className=\"text-sm text-gray-600 mt-1\">Add items to checkout.</p>\n              <Link\n                href=\"/\"\n                className=\"inline-flex mt-5 px-5 py-2 rounded-full bg-blue-600 text-white text-sm font-semibold\"\n              >\n                Start shopping\n              </Link>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {rows.map(({ ci, name, price, img, qty, lineTotal, key }: any) => (\n                <div key={key} className=\"border rounded-2xl p-4\">\n                  <div className=\"flex gap-4\">\n                    <div className=\"w-20 h-20 rounded-xl overflow-hidden bg-gray-50 flex-shrink-0\">\n                      <Image\n                        src={safeImg(img)}\n                        alt={name ?? \"Product\"}\n                        width={120}\n                        height={120}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"min-w-0\">\n                          <p className=\"font-semibold truncate\">{name ?? \"Item\"}</p>\n                          <p className=\"text-sm text-gray-600 mt-0.5\">{formatGBP(price)}</p>\n                        </div>\n\n                        <button\n                          onClick={() => removeItem(ci.productId, ci.variantId ?? null)}\n                          className=\"p-2 rounded-xl hover:bg-gray-50 text-sm text-gray-700\"\n                          aria-label=\"Remove item\"\n                        >\n                          âœ•\n                        </button>\n                      </div>\n\n                      <div className=\"mt-3 flex items-center justify-between\">\n                        <div className=\"inline-flex items-center border rounded-full overflow-hidden\">\n                          <button\n                            onClick={() =>\n                              setQty(ci.productId, ci.variantId ?? null, Math.max(1, qty - 1))\n                            }\n                            className=\"px-4 py-2 hover:bg-gray-50\"\n                          >\n                            âˆ’\n                          </button>\n                          <span className=\"px-4 py-2 text-sm font-semibold\">{qty}</span>\n                          <button\n                            onClick={() => setQty(ci.productId, ci.variantId ?? null, qty + 1)}\n                            className=\"px-4 py-2 hover:bg-gray-50\"\n                          >\n                            +\n                          </button>\n                        </div>\n\n                        <p className=\"font-semibold\">{formatGBP(lineTotal)}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n\n              <div className=\"pt-2\">\n                <button\n                  onClick={clearCart}\n                  className=\"text-sm font-semibold text-red-600 hover:underline\"\n                >\n                  Clear cart\n                </button>\n              </div>\n            </div>\n          )}\n        </section>\n\n        <aside className=\"bg-white\">\n          <div className=\"border rounded-2xl p-5 sticky top-20\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-700\">\n              <span className=\"text-base\">ðŸ§¾</span> Summary\n            </div>\n\n            <div className=\"mt-4 space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-700\">Subtotal</span>\n                <span className=\"font-semibold\">{formatGBP(subtotal)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-700\">Delivery</span>\n                <span className=\"font-semibold\">{formatGBP(deliveryFee)}</span>\n              </div>\n              <div className=\"border-t pt-3 flex justify-between\">\n                <span className=\"font-semibold\">Total</span>\n                <span className=\"font-semibold\">{formatGBP(total)}</span>\n              </div>\n            </div>\n\n            {mode === \"local\" ? (\n              <button\n                onClick={checkoutLocal}\n                disabled={!canCheckout}\n                className={`mt-5 inline-flex w-full justify-center rounded-full py-3 text-sm font-semibold ${\n                  !canCheckout\n                    ? \"bg-gray-200 text-gray-500\"\n                    : \"bg-blue-600 text-white hover:opacity-95\"\n                }`}\n              >\n                {isCredit ? \"Save Credit Order\" : `Checkout (Paid: ${labelPM(paymentMethod)})`}\n              </button>\n            ) : (\n              <Link\n                href=\"/checkout\"\n                className={`mt-5 inline-flex w-full justify-center rounded-full py-3 text-sm font-semibold ${\n                  !canCheckout\n                    ? \"bg-gray-200 text-gray-500 pointer-events-none\"\n                    : \"bg-blue-600 text-white hover:opacity-95\"\n                }`}\n              >\n                Checkout (Online)\n              </Link>\n            )}\n\n            {mode === \"local\" ? (\n              <p className=\"text-xs text-gray-500 mt-3\">Local paid checkouts appear in Payments.</p>\n            ) : (\n              <p className=\"text-xs text-gray-500 mt-3\">Online checkout uses your normal flow.</p>\n            )}\n          </div>\n        </aside>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}