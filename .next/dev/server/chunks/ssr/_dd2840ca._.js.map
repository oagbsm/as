{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/admin/inventory/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\ntype SupplierRow = {\n  id: number;\n  name: string;\n  phone: string | null;\n  email: string | null;\n  address: string | null;\n  created_at?: string;\n};\n\ntype VariantRow = {\n  id: number;\n  product_id: number;\n  label: string;\n  sku: string;\n  price: string | number;\n  mrp: string | number;\n  stock: number;\n  created_at?: string;\n\n  products?: { id: number; name: string; slug: string } | null;\n};\n\ntype ProductRow = { id: number; name: string; slug: string };\n\ntype BatchRow = {\n  id: number;\n  variant_id: number;\n  supplier_id: number | null;\n  qty_received: number;\n  qty_remaining: number;\n  total_cost: string | number;\n  unit_cost?: string | number; // generated column\n  reference: string | null;\n  received_at: string;\n\n  // NEW\n  is_paid: boolean;\n  paid_amount: string | number;\n  payment_method: string | null;\n  payee: string | null;\n  note: string | null;\n};\n\ntype MovementRow = {\n  id: number;\n  variant_id: number;\n  batch_id: number | null;\n  type: \"IN\" | \"OUT\" | \"ADJUST\";\n  qty: number;\n  unit_cost: string | number | null;\n  note: string | null;\n  order_id: number | null;\n  created_at: string;\n};\n\ntype InventoryPaymentRow = {\n  id: number;\n  batch_id: number;\n  method: string;\n  amount: string | number;\n  status: string;\n  reference: string | null;\n  created_at: string;\n};\n\nconst PAYMENT_METHODS = [\"EVC\", \"eDahab\", \"MERCHANT\", \"CASH\", \"PREMIER\"] as const;\n// Note: DB enum currently has EVC/CASH/MERCHANT. If you haven't added eDahab/PREMIER to enum yet,\n// keep using existing values only OR add them to the enum first.\n\nfunction n(x: any) {\n  const v = Number(x ?? 0);\n  return Number.isFinite(v) ? v : 0;\n}\n\nfunction money(x: any) {\n  return new Intl.NumberFormat(\"en-GB\", { style: \"currency\", currency: \"GBP\" }).format(n(x));\n}\n\nexport default function AdminInventoryPage() {\n  // data\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [variants, setVariants] = useState<VariantRow[]>([]);\n  const [productsMap, setProductsMap] = useState<Record<number, ProductRow>>({});\n  const [suppliers, setSuppliers] = useState<SupplierRow[]>([]);\n\n  // UI state\n  const [q, setQ] = useState(\"\");\n  const [selectedVariantId, setSelectedVariantId] = useState<number | null>(null);\n\n  // supplier form\n  const [supName, setSupName] = useState(\"\");\n  const [supPhone, setSupPhone] = useState(\"\");\n  const [supEmail, setSupEmail] = useState(\"\");\n  const [supAddress, setSupAddress] = useState(\"\");\n\n  // batch form\n  const [batchVariantId, setBatchVariantId] = useState<number | \"\">(\"\");\n  const [batchSupplierId, setBatchSupplierId] = useState<number | \"\">(\"\");\n  const [batchQty, setBatchQty] = useState<number>(10);\n  const [batchTotalCost, setBatchTotalCost] = useState<number>(0);\n  const [batchRef, setBatchRef] = useState(\"\");\n\n  // NEW: paid now vs pay later\n  const [paidNow, setPaidNow] = useState(true);\n  const [payMethod, setPayMethod] = useState<string>(\"EVC\"); // default\n  const [payAmount, setPayAmount] = useState<number>(0);\n\n  const [savingSupplier, setSavingSupplier] = useState(false);\n  const [savingBatch, setSavingBatch] = useState(false);\n\n  // details drawer\n  const [batches, setBatches] = useState<BatchRow[]>([]);\n  const [movements, setMovements] = useState<MovementRow[]>([]);\n  const [invPayments, setInvPayments] = useState<InventoryPaymentRow[]>([]);\n  const [detailsLoading, setDetailsLoading] = useState(false);\n\n  // Pay modal (for existing unpaid/partial batch)\n  // unpaid invoices (inventory batches where total_cost > paid_amount)\nconst [unpaidInvoices, setUnpaidInvoices] = useState<BatchRow[]>([]);\n  const [payModalOpen, setPayModalOpen] = useState(false);\n  const [payBatchId, setPayBatchId] = useState<number | null>(null);\n  const [payModalMethod, setPayModalMethod] = useState<string>(\"EVC\");\n  const [payModalAmount, setPayModalAmount] = useState<number>(0);\n  const [payModalRef, setPayModalRef] = useState<string>(\"\");\n  const [payModalSaving, setPayModalSaving] = useState(false);\n\n  async function loadAll() {\n    setLoading(true);\n    setErr(null);\n\n    try {\n      // 1) Variants + embedded product\n      const { data: vData, error: vErr } = await supabase\n        .from(\"product_variants\")\n        .select(\"id,product_id,label,sku,price,mrp,stock,created_at,products:products(id,name,slug)\")\n        .order(\"id\", { ascending: true })\n        .limit(5000);\n\n      if (vErr) throw vErr;\n      setVariants((vData ?? []) as any);\n\n      // 2) Fallback product map\n      const { data: pData, error: pErr } = await supabase.from(\"products\").select(\"id,name,slug\").limit(5000);\n      if (pErr) throw pErr;\n\n      const pm: Record<number, ProductRow> = {};\n      for (const p of (pData ?? []) as any[]) pm[Number(p.id)] = p;\n      setProductsMap(pm);\n\n      // 3) Suppliers\n      const { data: sData, error: sErr } = await supabase\n        .from(\"suppliers\")\n        .select(\"id,name,phone,email,address,created_at\")\n        .order(\"id\", { ascending: true })\n        .limit(2000);\n\n      if (sErr) throw sErr;\n      setSuppliers((sData ?? []) as any);\n      // 4) Recent batches (used to surface unpaid invoices)\n      const { data: bData, error: bErr } = await supabase\n        .from(\"inventory_batches\")\n        .select(\n          \"id,variant_id,supplier_id,qty_received,qty_remaining,total_cost,unit_cost,reference,received_at,is_paid,paid_amount,payment_method,payee,note\"\n        )\n        .order(\"received_at\", { ascending: false })\n        .limit(500);\n\n      if (bErr) throw bErr;\n\n      const allBatches = ((bData ?? []) as any) as BatchRow[];\n      // Unpaid invoice = batch where total_cost > paid_amount\n      const unpaid = allBatches.filter((b) => n(b.total_cost) - n(b.paid_amount) > 0.0001);\n      setUnpaidInvoices(unpaid);\n   \n   \n   \n   \n    } catch (e: any) {\n      setErr(e?.message || \"Failed to load inventory data\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    loadAll();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // keep payAmount sensible\n  useEffect(() => {\n    if (paidNow) {\n      // default to full cost if user hasn't typed\n      setPayAmount((prev) => (prev > 0 ? prev : n(batchTotalCost)));\n    } else {\n      setPayAmount(0);\n    }\n  }, [paidNow, batchTotalCost]);\n\n  const supplierById = useMemo(() => {\n    const m: Record<number, SupplierRow> = {};\n    for (const s of suppliers) m[s.id] = s;\n    return m;\n  }, [suppliers]);\n\n  const filtered = useMemo(() => {\n    const term = q.trim().toLowerCase();\n    if (!term) return variants;\n\n    return variants.filter((v) => {\n      const prod = v.products ?? (productsMap[v.product_id] ? { ...productsMap[v.product_id] } : null);\n      const s = `${prod?.name ?? \"\"} ${prod?.slug ?? \"\"} ${v.label ?? \"\"} ${v.sku ?? \"\"}`.toLowerCase();\n      return s.includes(term);\n    });\n  }, [q, variants, productsMap]);\n\n  const stats = useMemo(() => {\n    const totalVariants = variants.length;\n    const low = variants.filter((v) => n(v.stock) <= 5).length;\n    const out = variants.filter((v) => n(v.stock) <= 0).length;\n    return { totalVariants, low, out };\n  }, [variants]);\n\n  async function addSupplier() {\n    const name = supName.trim();\n    if (!name) return alert(\"Supplier name is required.\");\n\n    setSavingSupplier(true);\n    try {\n      const { error } = await supabase.from(\"suppliers\").insert({\n        name,\n        phone: supPhone.trim() || null,\n        email: supEmail.trim() || null,\n        address: supAddress.trim() || null,\n      });\n\n      if (error) throw error;\n\n      setSupName(\"\");\n      setSupPhone(\"\");\n      setSupEmail(\"\");\n      setSupAddress(\"\");\n      await loadAll();\n    } catch (e: any) {\n      alert(e?.message || \"Failed to add supplier\");\n    } finally {\n      setSavingSupplier(false);\n    }\n  }\n\n  async function receiveBatch() {\n    if (!batchVariantId) return alert(\"Choose a variant.\");\n    const qty = Math.trunc(n(batchQty));\n    const totalCost = n(batchTotalCost);\n\n    if (qty <= 0) return alert(\"Quantity must be > 0.\");\n    if (totalCost < 0) return alert(\"Total cost must be >= 0.\");\n\n    // if paid now, amount must be > 0 (can be partial if you want)\n    if (paidNow && n(payAmount) <= 0) return alert(\"Enter paid amount (or switch to Pay later).\");\n\n    setSavingBatch(true);\n\n    const variantId = Number(batchVariantId);\n\n    try {\n      // 1) Insert batch (always)\n      const payload: any = {\n        variant_id: variantId,\n        supplier_id: batchSupplierId ? Number(batchSupplierId) : null,\n        qty_received: qty,\n        qty_remaining: qty,\n        total_cost: totalCost,\n        reference: batchRef.trim() || null,\n\n        // NEW\n        is_paid: paidNow ? false : false, // will be set correctly by trigger if payment inserted\n        paid_amount: 0,\n        payment_method: paidNow ? payMethod : null,\n      };\n\n      const { data: batchRow, error: bErr } = await supabase\n        .from(\"inventory_batches\")\n        .insert(payload)\n        .select(\"id\")\n        .single();\n\n      if (bErr) throw bErr;\n\n      // 2) If paid now => insert inventory payment (trigger will update batch paid_amount/is_paid)\n      if (paidNow) {\n        const { error: pErr } = await supabase.from(\"inventory_payments\").insert({\n          batch_id: Number(batchRow.id),\n          method: payMethod,\n          amount: n(payAmount),\n          status: \"SUCCESS\",\n          reference: batchRef.trim() || null,\n        });\n        if (pErr) throw pErr;\n      }\n\n      // ✅ Optimistically update UI immediately for stock\n      setVariants((prev) => prev.map((v) => (v.id === variantId ? { ...v, stock: n(v.stock) + qty } : v)));\n\n      setBatchRef(\"\");\n\n      // ✅ Reload truth from DB\n      await loadAll();\n\n      // ✅ If details drawer open for same variant, reload it too\n      if (selectedVariantId === variantId) {\n        await openDetails(variantId);\n      }\n    } catch (e: any) {\n      alert(e?.message || \"Failed to receive batch\");\n    } finally {\n      setSavingBatch(false);\n    }\n  }\n\n  async function openDetails(variantId: number) {\n    setSelectedVariantId(variantId);\n    setDetailsLoading(true);\n\n    try {\n      const b = await supabase\n        .from(\"inventory_batches\")\n        .select(\n          \"id,variant_id,supplier_id,qty_received,qty_remaining,total_cost,unit_cost,reference,received_at,is_paid,paid_amount,payment_method,payee,note\"\n        )\n        .eq(\"variant_id\", variantId)\n        .order(\"received_at\", { ascending: false })\n        .limit(50);\n\n      const m = await supabase\n        .from(\"inventory_movements\")\n        .select(\"id,variant_id,batch_id,type,qty,unit_cost,note,order_id,created_at\")\n        .eq(\"variant_id\", variantId)\n        .order(\"created_at\", { ascending: false })\n        .limit(100);\n\n      if (b.error) throw b.error;\n      if (m.error) throw m.error;\n\n      const batchRows = (b.data ?? []) as any as BatchRow[];\n      setBatches(batchRows);\n      setMovements((m.data ?? []) as any);\n\n      // Payments for those batches\n      const batchIds = batchRows.map((x) => Number(x.id)).filter(Boolean);\n      if (batchIds.length === 0) {\n        setInvPayments([]);\n      } else {\n        const p = await supabase\n          .from(\"inventory_payments\")\n          .select(\"id,batch_id,method,amount,status,reference,created_at\")\n          .in(\"batch_id\", batchIds)\n          .order(\"created_at\", { ascending: false })\n          .limit(200);\n\n        if (p.error) throw p.error;\n        setInvPayments((p.data ?? []) as any);\n      }\n    } catch (e: any) {\n      alert(e?.message || \"Failed to load details\");\n      setBatches([]);\n      setMovements([]);\n      setInvPayments([]);\n    } finally {\n      setDetailsLoading(false);\n    }\n  }\n\n  const selectedVariant = useMemo(() => {\n    if (!selectedVariantId) return null;\n    return variants.find((v) => v.id === selectedVariantId) ?? null;\n  }, [selectedVariantId, variants]);\n\n  const selectedProduct = useMemo(() => {\n    if (!selectedVariant) return null;\n    return selectedVariant.products ?? productsMap[selectedVariant.product_id] ?? null;\n  }, [selectedVariant, productsMap]);\n\n  const avgUnitCost = useMemo(() => {\n    const qty = batches.reduce((s, r) => s + n(r.qty_received), 0);\n    const cost = batches.reduce((s, r) => s + n(r.total_cost), 0);\n    return qty > 0 ? cost / qty : 0;\n  }, [batches]);\n\n  const unpaidBatches = useMemo(() => {\n    return (batches ?? []).filter((b) => n(b.total_cost) - n(b.paid_amount) > 0.0001);\n  }, [batches]);\n\n  function openPayModal(batch: BatchRow) {\n    const due = Math.max(0, n(batch.total_cost) - n(batch.paid_amount));\n    setPayBatchId(Number(batch.id));\n    setPayModalAmount(due);\n    setPayModalMethod(String(batch.payment_method ?? \"EVC\"));\n    setPayModalRef(batch.reference ?? \"\");\n    setPayModalOpen(true);\n  }\n\n  async function submitPayModal() {\n    if (!payBatchId) return;\n    const amt = n(payModalAmount);\n    if (amt <= 0) return alert(\"Amount must be > 0.\");\n\n    setPayModalSaving(true);\n    try {\n      const { error } = await supabase.from(\"inventory_payments\").insert({\n        batch_id: payBatchId,\n        method: payModalMethod,\n        amount: amt,\n        status: \"SUCCESS\",\n        reference: payModalRef.trim() || null,\n      });\n\n      if (error) throw error;\n\n      // refresh details\n      if (selectedVariantId) await openDetails(selectedVariantId);\n      // refresh stock list (not required for payments, but keeps UI consistent)\n      await loadAll();\n\n      setPayModalOpen(false);\n      setPayBatchId(null);\n      setPayModalRef(\"\");\n    } catch (e: any) {\n      alert(e?.message || 'Failed to record payment');\n    } finally {\n      setPayModalSaving(false);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 text-black\">\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\n        <div className=\"flex items-start justify-between gap-3\">\n          <div>\n            <Link href=\"/admin\" className=\"text-sm text-blue-600 hover:underline\">\n              ← Admin\n            </Link>\n            <h1 className=\"text-xl font-semibold mt-2\">Inventory</h1>\n            <p className=\"text-xs text-gray-600 mt-1\">\n              Stock comes from <span className=\"font-semibold\">product_variants.stock</span>. Batches log purchases; payments can be paid now or later.\n            </p>\n          </div>\n\n          <button onClick={loadAll} className=\"px-4 py-2 rounded-full border bg-white text-sm font-semibold\">\n            Refresh\n          </button>\n        </div>\n\n        {err ? <div className=\"mt-4 border rounded-2xl p-4 bg-white text-sm text-red-600\">{err}</div> : null}\n\n        {/* STAT CARDS: 2 cols phone, 4 cols desktop */}\n        <section className=\"mt-4 grid grid-cols-2 lg:grid-cols-4 gap-3\">\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"text-xs text-gray-500\">Variants</div>\n            <div className=\"mt-1 text-lg font-semibold\">{loading ? \"…\" : stats.totalVariants}</div>\n          </div>\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"text-xs text-gray-500\">Low stock (≤ 5)</div>\n            <div className=\"mt-1 text-lg font-semibold\">{loading ? \"…\" : stats.low}</div>\n          </div>\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"text-xs text-gray-500\">Out of stock</div>\n            <div className=\"mt-1 text-lg font-semibold\">{loading ? \"…\" : stats.out}</div>\n          </div>\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"text-xs text-gray-500\">Suppliers</div>\n            <div className=\"mt-1 text-lg font-semibold\">{loading ? \"…\" : suppliers.length}</div>\n          </div>\n        </section>\n{/* UNPAID SUPPLIER INVOICES */}\n<section className=\"mt-4 border rounded-2xl bg-white p-4\">\n  <div className=\"flex items-center justify-between gap-3\">\n    <div>\n      <div className=\"font-semibold\">Unpaid supplier invoices (Pay later)</div>\n      <div className=\"text-xs text-gray-600 mt-1\">\n        When you choose <span className=\"font-semibold\">Pay later</span>, the invoice appears here as an unpaid batch.\n      </div>\n    </div>\n    <div className=\"text-xs text-gray-600\">\n      Unpaid: <span className=\"font-semibold\">{loading ? \"…\" : unpaidInvoices.length}</span>\n    </div>\n  </div>\n\n  {unpaidInvoices.length === 0 ? (\n    <div className=\"mt-3 text-sm text-gray-600\">No unpaid invoices.</div>\n  ) : (\n    <div className=\"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-2\">\n      {unpaidInvoices.slice(0, 50).map((b) => {\n        const v = variants.find((x) => x.id === Number(b.variant_id));\n        const prod = v?.products ?? (v ? productsMap[v.product_id] : null);\n        const title = prod?.name ?? \"Product\";\n        const subtitle = v ? `${v.label} • SKU:${v.sku}` : `Variant #${b.variant_id}`;\n\n        const supplierName = b.supplier_id\n          ? supplierById[Number(b.supplier_id)]?.name ?? \"Supplier\"\n          : \"No supplier\";\n\n        const due = Math.max(0, n(b.total_cost) - n(b.paid_amount));\n\n        return (\n          <div key={b.id} className=\"border rounded-2xl p-3\">\n            <div className=\"flex items-start justify-between gap-3\">\n              <div>\n                <div className=\"text-sm font-semibold\">Invoice (Batch) #{b.id}</div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {supplierName}\n                  {b.reference ? ` • ${b.reference}` : \"\"}\n                  {b.received_at ? ` • ${String(b.received_at)}` : \"\"}\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-sm font-semibold\">{money(due)}</div>\n                <div className=\"text-xs text-gray-600\">due</div>\n              </div>\n            </div>\n\n            <div className=\"mt-2 text-xs text-gray-700\">\n              <div className=\"font-semibold\">{title}</div>\n              <div className=\"text-gray-600\">{subtitle}</div>\n            </div>\n\n            <div className=\"mt-3 flex items-center gap-2\">\n              <button\n                onClick={() => openDetails(Number(b.variant_id))}\n                className=\"px-3 py-2 rounded-full border text-xs font-semibold\"\n              >\n                View movements\n              </button>\n              <button\n                onClick={() => openPayModal(b)}\n                className=\"px-3 py-2 rounded-full bg-blue-600 text-white text-xs font-semibold\"\n              >\n                Pay / Partial\n              </button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  )}\n</section>\n        {/* TOP GRID */}\n        <section className=\"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3\">\n          {/* Add Supplier */}\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"font-semibold\">Add supplier</div>\n            <div className=\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"text-sm\">\n                Name *\n                <input value={supName} onChange={(e) => setSupName(e.target.value)} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n              <label className=\"text-sm\">\n                Phone\n                <input value={supPhone} onChange={(e) => setSupPhone(e.target.value)} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n              <label className=\"text-sm\">\n                Email\n                <input value={supEmail} onChange={(e) => setSupEmail(e.target.value)} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n              <label className=\"text-sm\">\n                Address\n                <input value={supAddress} onChange={(e) => setSupAddress(e.target.value)} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n            </div>\n\n            <button\n              onClick={addSupplier}\n              disabled={savingSupplier}\n              className={`mt-3 w-full rounded-full py-2 text-sm font-semibold ${savingSupplier ? \"bg-gray-200 text-gray-500\" : \"bg-blue-600 text-white\"}`}\n            >\n              {savingSupplier ? \"Saving…\" : \"Save supplier\"}\n            </button>\n          </div>\n\n          {/* Receive Stock */}\n          <div className=\"border rounded-2xl p-4 bg-white\">\n            <div className=\"font-semibold\">Receive stock (log a batch)</div>\n            <p className=\"text-xs text-gray-600 mt-1\">\n              Enter <span className=\"font-semibold\">qty</span> + <span className=\"font-semibold\">total cost</span>. Choose paid now or pay later.\n            </p>\n\n            <div className=\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"text-sm md:col-span-2\">\n                Variant *\n                <select\n                  value={batchVariantId}\n                  onChange={(e) => setBatchVariantId(e.target.value ? Number(e.target.value) : \"\")}\n                  className=\"mt-1 w-full border rounded-xl px-3 py-2 bg-white\"\n                >\n                  <option value=\"\">Select variant…</option>\n                  {variants.map((v) => {\n                    const prod = v.products ?? productsMap[v.product_id];\n                    const title = `${prod?.name ?? `Product ${v.product_id}`} • ${v.label} • SKU:${v.sku}`;\n                    return (\n                      <option key={v.id} value={v.id}>\n                        {title}\n                      </option>\n                    );\n                  })}\n                </select>\n              </label>\n\n              <label className=\"text-sm\">\n                Supplier (optional)\n                <select\n                  value={batchSupplierId}\n                  onChange={(e) => setBatchSupplierId(e.target.value ? Number(e.target.value) : \"\")}\n                  className=\"mt-1 w-full border rounded-xl px-3 py-2 bg-white\"\n                >\n                  <option value=\"\">None</option>\n                  {suppliers.map((s) => (\n                    <option key={s.id} value={s.id}>\n                      {s.name}\n                    </option>\n                  ))}\n                </select>\n              </label>\n\n              <label className=\"text-sm\">\n                Qty received *\n                <input type=\"number\" value={batchQty} onChange={(e) => setBatchQty(Number(e.target.value))} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n\n              <label className=\"text-sm\">\n                Total cost *\n                <input type=\"number\" value={batchTotalCost} onChange={(e) => setBatchTotalCost(Number(e.target.value))} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n\n              <label className=\"text-sm\">\n                Unit cost (auto)\n                <input\n                  value={batchQty > 0 ? String(n(batchTotalCost) / n(batchQty)) : \"0\"}\n                  readOnly\n                  className=\"mt-1 w-full border rounded-xl px-3 py-2 bg-gray-50 text-gray-700\"\n                />\n              </label>\n\n              <label className=\"text-sm md:col-span-2\">\n                Reference (invoice/PO)\n                <input value={batchRef} onChange={(e) => setBatchRef(e.target.value)} className=\"mt-1 w-full border rounded-xl px-3 py-2\" />\n              </label>\n\n              {/* Paid now toggle */}\n              <div className=\"md:col-span-2 flex items-center justify-between border rounded-xl px-3 py-2\">\n                <div className=\"text-sm\">\n                  <div className=\"font-semibold\">Paid now?</div>\n                  <div className=\"text-xs text-gray-600\">If no, it will show as unpaid and you can pay later.</div>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => setPaidNow((v) => !v)}\n                  className={`px-3 py-2 rounded-full text-sm font-semibold ${paidNow ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-black\"}`}\n                >\n                  {paidNow ? \"Yes\" : \"No\"}\n                </button>\n              </div>\n\n              {/* Payment fields if paid now */}\n              {paidNow ? (\n                <>\n                  <label className=\"text-sm\">\n                    Payment method\n                    <select\n                      value={payMethod}\n                      onChange={(e) => setPayMethod(e.target.value)}\n                      className=\"mt-1 w-full border rounded-xl px-3 py-2 bg-white\"\n                    >\n                      {/* Use only values that exist in your DB enum, unless you added more */}\n                      <option value=\"EVC\">EVC</option>\n                      <option value=\"MERCHANT\">Merchant</option>\n                      <option value=\"CASH\">Cash</option>\n                      {/* If you added these to the enum, enable them: */}\n                      <option value=\"eDahab\">eDahab</option>\n                      <option value=\"PREMIER\">Premier Bank</option>\n                    </select>\n                  </label>\n\n                  <label className=\"text-sm\">\n                    Paid amount\n                    <input\n                      type=\"number\"\n                      value={payAmount}\n                      onChange={(e) => setPayAmount(Number(e.target.value))}\n                      className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n                    />\n                    <div className=\"text-xs text-gray-500 mt-1\">\n                      Due after this: <span className=\"font-semibold\">{money(Math.max(0, n(batchTotalCost) - n(payAmount)))}</span>\n                    </div>\n                  </label>\n                </>\n              ) : null}\n            </div>\n\n            <button\n              onClick={receiveBatch}\n              disabled={savingBatch}\n              className={`mt-3 w-full rounded-full py-2 text-sm font-semibold ${savingBatch ? \"bg-gray-200 text-gray-500\" : \"bg-blue-600 text-white\"}`}\n            >\n              {savingBatch ? \"Saving…\" : paidNow ? \"Receive & record payment\" : \"Receive (pay later)\"}\n            </button>\n          </div>\n        </section>\n\n        {/* Inventory list */}\n        <section className=\"mt-4 border rounded-2xl bg-white p-4\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <div className=\"font-semibold\">Current stock</div>\n            <input\n              value={q}\n              onChange={(e) => setQ(e.target.value)}\n              placeholder=\"Search product / sku / label…\"\n              className=\"w-[280px] max-w-full border rounded-full px-4 py-2 text-sm\"\n            />\n          </div>\n\n          <div className=\"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-2\">\n            {(loading ? Array.from({ length: 10 }) : filtered).map((v: any, idx: number) => {\n              if (loading) {\n                return (\n                  <div key={idx} className=\"border rounded-2xl p-3 bg-gray-50\">\n                    <div className=\"h-4 w-2/3 bg-gray-200 rounded\" />\n                    <div className=\"mt-2 h-3 w-1/2 bg-gray-200 rounded\" />\n                  </div>\n                );\n              }\n\n              const prod = v.products ?? productsMap[v.product_id];\n              const title = prod?.name ?? `Product ${v.product_id}`;\n              const stock = n(v.stock);\n\n              return (\n                <button key={v.id} onClick={() => openDetails(v.id)} className=\"border rounded-2xl p-3 text-left hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                      <div className=\"text-sm font-semibold\">{title}</div>\n                      <div className=\"text-xs text-gray-600 mt-1\">\n                        {v.label} • SKU:{v.sku}\n                      </div>\n                    </div>\n\n                    <div className=\"text-right\">\n                      <div className={`text-sm font-semibold ${stock <= 0 ? \"text-red-600\" : stock <= 5 ? \"text-orange-600\" : \"text-black\"}`}>\n                        {stock}\n                      </div>\n                      <div className=\"text-xs text-gray-600\">in stock</div>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-2 text-xs text-gray-600 flex gap-4\">\n                    <span>\n                      Price: <span className=\"font-semibold\">{money(v.price)}</span>\n                    </span>\n                    <span>\n                      MRP: <span className=\"font-semibold\">{money(v.mrp)}</span>\n                    </span>\n                  </div>\n                </button>\n              );\n            })}\n          </div>\n        </section>\n\n        {/* Details drawer */}\n        {selectedVariantId ? (\n          <div className=\"fixed inset-0 bg-black/40 flex items-end lg:items-center justify-center p-3 z-50\">\n            <div className=\"bg-white w-full max-w-3xl rounded-2xl p-4\">\n              <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                  <div className=\"text-sm text-gray-600\">Variant details</div>\n                  <div className=\"text-lg font-semibold\">\n                    {selectedProduct?.name ?? \"—\"}{\" \"}\n                    <span className=\"text-sm font-normal text-gray-600\">\n                      • {selectedVariant?.label ?? \"\"} • SKU:{selectedVariant?.sku ?? \"\"}\n                    </span>\n                  </div>\n                  <div className=\"text-sm mt-1\">\n                    Stock: <span className=\"font-semibold\">{selectedVariant ? n(selectedVariant.stock) : \"—\"}</span>\n                    {\" • \"}\n                    Avg unit cost (from batches): <span className=\"font-semibold\">{money(avgUnitCost)}</span>\n                  </div>\n                </div>\n\n                <button onClick={() => setSelectedVariantId(null)} className=\"px-3 py-2 rounded-full border text-sm font-semibold\">\n                  Close\n                </button>\n              </div>\n\n              {detailsLoading ? (\n                <div className=\"mt-4 text-sm text-gray-600\">Loading…</div>\n              ) : (\n                <>\n                  {/* Unpaid/partial batches quick actions */}\n                  {unpaidBatches.length > 0 ? (\n                    <div className=\"mt-4 border rounded-2xl p-3 bg-yellow-50\">\n                      <div className=\"font-semibold text-sm\">Unpaid / partial batches</div>\n                      <div className=\"mt-2 space-y-2\">\n                        {unpaidBatches.slice(0, 6).map((b) => {\n                          const due = Math.max(0, n(b.total_cost) - n(b.paid_amount));\n                          return (\n                            <div key={b.id} className=\"flex items-center justify-between text-sm\">\n                              <div className=\"text-gray-700\">\n                                Batch #{b.id} • Due <span className=\"font-semibold\">{money(due)}</span>\n                              </div>\n                              <button\n                                onClick={() => openPayModal(b)}\n                                className=\"px-3 py-2 rounded-full bg-blue-600 text-white text-xs font-semibold\"\n                              >\n                                Pay / Partial\n                              </button>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  ) : null}\n\n                  <div className=\"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                    {/* Batches */}\n                    <div className=\"border rounded-2xl p-3\">\n                      <div className=\"font-semibold\">Recent batches</div>\n                      <div className=\"mt-3 space-y-2 text-sm\">\n                        {batches.length === 0 ? (\n                          <div className=\"text-gray-600 text-sm\">No batches.</div>\n                        ) : (\n                          batches.map((b) => {\n                            const due = Math.max(0, n(b.total_cost) - n(b.paid_amount));\n                            return (\n                              <div key={b.id} className=\"border rounded-xl p-2\">\n                                <div className=\"flex justify-between\">\n                                  <div className=\"text-gray-700\">\n                                    +{b.qty_received}{\" \"}\n                                    <span className=\"text-xs text-gray-500\">\n                                      {b.supplier_id ? `• ${supplierById[b.supplier_id]?.name ?? \"Supplier\"}` : \"\"}\n                                      {b.reference ? ` • ${b.reference}` : \"\"}\n                                    </span>\n                                  </div>\n                                  <div className=\"font-semibold\">\n                                    {money(b.unit_cost ?? (n(b.total_cost) / n(b.qty_received)))}\n                                  </div>\n                                </div>\n\n                                <div className=\"mt-1 text-xs text-gray-600 flex items-center justify-between\">\n                                  <span>\n                                    Cost: <span className=\"font-semibold\">{money(b.total_cost)}</span> • Paid:{\" \"}\n                                    <span className=\"font-semibold\">{money(b.paid_amount)}</span> • Due:{\" \"}\n                                    <span className=\"font-semibold\">{money(due)}</span>\n                                  </span>\n                                  <span className=\"text-gray-500\">\n                                    {b.payment_method ? String(b.payment_method) : \"\"}\n                                  </span>\n                                </div>\n                              </div>\n                            );\n                          })\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Movements */}\n                    <div className=\"border rounded-2xl p-3\">\n                      <div className=\"font-semibold\">Movements</div>\n                      <div className=\"mt-3 space-y-2 text-sm\">\n                        {movements.length === 0 ? (\n                          <div className=\"text-gray-600 text-sm\">No movements.</div>\n                        ) : (\n                          movements.map((m) => (\n                            <div key={m.id} className=\"flex justify-between\">\n                              <div className=\"text-gray-700\">\n                                {m.type}{\" \"}\n                                <span className=\"font-semibold\">{m.qty > 0 ? `+${m.qty}` : `${m.qty}`}</span>\n                                <span className=\"text-xs text-gray-500\">\n                                  {m.order_id ? ` • order #${m.order_id}` : \"\"}\n                                  {m.note ? ` • ${m.note}` : \"\"}\n                                </span>\n                              </div>\n                              <div className=\"text-xs text-gray-500\">{String(m.created_at)}</div>\n                            </div>\n                          ))\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Payments history */}\n                  <div className=\"mt-4 border rounded-2xl p-3\">\n                    <div className=\"font-semibold\">Inventory payments</div>\n                    <div className=\"mt-2 space-y-2 text-sm\">\n                      {invPayments.length === 0 ? (\n                        <div className=\"text-gray-600 text-sm\">No payments recorded.</div>\n                      ) : (\n                        invPayments.slice(0, 30).map((p) => (\n                          <div key={p.id} className=\"flex justify-between\">\n                            <div className=\"text-gray-700\">\n                              Batch #{p.batch_id} • {p.method} • <span className=\"font-semibold\">{money(p.amount)}</span>{\" \"}\n                              <span className=\"text-xs text-gray-500\">{p.reference ? ` • ${p.reference}` : \"\"}</span>\n                            </div>\n                            <div className=\"text-xs text-gray-500\">{String(p.created_at)}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        ) : null}\n\n        {/* Pay modal */}\n        {payModalOpen ? (\n          <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center p-3 z-50\">\n            <div className=\"bg-white w-full max-w-md rounded-2xl p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <div className=\"text-sm text-gray-600\">Pay inventory batch</div>\n                  <div className=\"text-lg font-semibold\">Batch #{payBatchId}</div>\n                </div>\n                <button\n                  onClick={() => setPayModalOpen(false)}\n                  className=\"px-3 py-2 rounded-full border text-sm font-semibold\"\n                >\n                  Close\n                </button>\n              </div>\n\n              <div className=\"mt-3 grid grid-cols-1 gap-3\">\n                <label className=\"text-sm\">\n                  Method\n                  <select\n                    value={payModalMethod}\n                    onChange={(e) => setPayModalMethod(e.target.value)}\n                    className=\"mt-1 w-full border rounded-xl px-3 py-2 bg-white\"\n                  >\n                    <option value=\"EVC\">EVC</option>\n                    <option value=\"MERCHANT\">Merchant</option>\n                    <option value=\"CASH\">Cash</option>\n                    <option value=\"eDahab\">eDahab</option>\n                    <option value=\"PREMIER\">Premier Bank</option>\n                  </select>\n                </label>\n\n                <label className=\"text-sm\">\n                  Amount\n                  <input\n                    type=\"number\"\n                    value={payModalAmount}\n                    onChange={(e) => setPayModalAmount(Number(e.target.value))}\n                    className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n                  />\n                </label>\n\n                <label className=\"text-sm\">\n                  Reference (optional)\n                  <input\n                    value={payModalRef}\n                    onChange={(e) => setPayModalRef(e.target.value)}\n                    className=\"mt-1 w-full border rounded-xl px-3 py-2\"\n                  />\n                </label>\n\n                <button\n                  onClick={submitPayModal}\n                  disabled={payModalSaving}\n                  className={`w-full rounded-full py-2 text-sm font-semibold ${payModalSaving ? \"bg-gray-200 text-gray-500\" : \"bg-blue-600 text-white\"}`}\n                >\n                  {payModalSaving ? \"Saving…\" : \"Save payment\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div> \n    </main>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAuEA,MAAM,kBAAkB;IAAC;IAAO;IAAU;IAAY;IAAQ;CAAU;AACxE,kGAAkG;AAClG,iEAAiE;AAEjE,SAAS,EAAE,CAAM;IACf,MAAM,IAAI,OAAO,KAAK;IACtB,OAAO,OAAO,QAAQ,CAAC,KAAK,IAAI;AAClC;AAEA,SAAS,MAAM,CAAM;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM,GAAG,MAAM,CAAC,EAAE;AACzF;AAEe,SAAS;IACtB,OAAO;IACP,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAe,EAAE;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA6B,CAAC;IAC5E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAE5D,WAAW;IACX,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,iNAAQ,EAAC;IAC3B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAgB;IAE1E,gBAAgB;IAChB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,aAAa;IACb,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAc;IAClE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAc;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAS;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,6BAA6B;IAC7B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAS,QAAQ,UAAU;IACrE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAS;IAEnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,iBAAiB;IACjB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAC5D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAwB,EAAE;IACxE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,gDAAgD;IAChD,qEAAqE;IACvE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAC5D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAS;IACvD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,eAAe;QACb,WAAW;QACX,OAAO;QAEP,IAAI;YACF,iCAAiC;YACjC,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAChD,IAAI,CAAC,oBACL,MAAM,CAAC,sFACP,KAAK,CAAC,MAAM;gBAAE,WAAW;YAAK,GAC9B,KAAK,CAAC;YAET,IAAI,MAAM,MAAM;YAChB,YAAa,SAAS,EAAE;YAExB,0BAA0B;YAC1B,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,gBAAgB,KAAK,CAAC;YAClG,IAAI,MAAM,MAAM;YAEhB,MAAM,KAAiC,CAAC;YACxC,KAAK,MAAM,KAAM,SAAS,EAAE,CAAY,EAAE,CAAC,OAAO,EAAE,EAAE,EAAE,GAAG;YAC3D,eAAe;YAEf,eAAe;YACf,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAChD,IAAI,CAAC,aACL,MAAM,CAAC,0CACP,KAAK,CAAC,MAAM;gBAAE,WAAW;YAAK,GAC9B,KAAK,CAAC;YAET,IAAI,MAAM,MAAM;YAChB,aAAc,SAAS,EAAE;YACzB,sDAAsD;YACtD,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAChD,IAAI,CAAC,qBACL,MAAM,CACL,iJAED,KAAK,CAAC,eAAe;gBAAE,WAAW;YAAM,GACxC,KAAK,CAAC;YAET,IAAI,MAAM,MAAM;YAEhB,MAAM,aAAe,SAAS,EAAE;YAChC,wDAAwD;YACxD,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,WAAW,IAAI;YAC7E,kBAAkB;QAKpB,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;IACA,uDAAuD;IACzD,GAAG,EAAE;IAEL,0BAA0B;IAC1B,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;YACX,4CAA4C;YAC5C,aAAa,CAAC,OAAU,OAAO,IAAI,OAAO,EAAE;QAC9C,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;QAAS;KAAe;IAE5B,MAAM,eAAe,IAAA,gNAAO,EAAC;QAC3B,MAAM,IAAiC,CAAC;QACxC,KAAK,MAAM,KAAK,UAAW,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG;QACrC,OAAO;IACT,GAAG;QAAC;KAAU;IAEd,MAAM,WAAW,IAAA,gNAAO,EAAC;QACvB,MAAM,OAAO,EAAE,IAAI,GAAG,WAAW;QACjC,IAAI,CAAC,MAAM,OAAO;QAElB,OAAO,SAAS,MAAM,CAAC,CAAC;YACtB,MAAM,OAAO,EAAE,QAAQ,IAAI,CAAC,WAAW,CAAC,EAAE,UAAU,CAAC,GAAG;gBAAE,GAAG,WAAW,CAAC,EAAE,UAAU,CAAC;YAAC,IAAI,IAAI;YAC/F,MAAM,IAAI,GAAG,MAAM,QAAQ,GAAG,CAAC,EAAE,MAAM,QAAQ,GAAG,CAAC,EAAE,EAAE,KAAK,IAAI,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,IAAI,CAAC,WAAW;YAC/F,OAAO,EAAE,QAAQ,CAAC;QACpB;IACF,GAAG;QAAC;QAAG;QAAU;KAAY;IAE7B,MAAM,QAAQ,IAAA,gNAAO,EAAC;QACpB,MAAM,gBAAgB,SAAS,MAAM;QACrC,MAAM,MAAM,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,GAAG,MAAM;QAC1D,MAAM,MAAM,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,GAAG,MAAM;QAC1D,OAAO;YAAE;YAAe;YAAK;QAAI;IACnC,GAAG;QAAC;KAAS;IAEb,eAAe;QACb,MAAM,OAAO,QAAQ,IAAI;QACzB,IAAI,CAAC,MAAM,OAAO,MAAM;QAExB,kBAAkB;QAClB,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,aAAa,MAAM,CAAC;gBACxD;gBACA,OAAO,SAAS,IAAI,MAAM;gBAC1B,OAAO,SAAS,IAAI,MAAM;gBAC1B,SAAS,WAAW,IAAI,MAAM;YAChC;YAEA,IAAI,OAAO,MAAM;YAEjB,WAAW;YACX,YAAY;YACZ,YAAY;YACZ,cAAc;YACd,MAAM;QACR,EAAE,OAAO,GAAQ;YACf,MAAM,GAAG,WAAW;QACtB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,eAAe;QACb,IAAI,CAAC,gBAAgB,OAAO,MAAM;QAClC,MAAM,MAAM,KAAK,KAAK,CAAC,EAAE;QACzB,MAAM,YAAY,EAAE;QAEpB,IAAI,OAAO,GAAG,OAAO,MAAM;QAC3B,IAAI,YAAY,GAAG,OAAO,MAAM;QAEhC,+DAA+D;QAC/D,IAAI,WAAW,EAAE,cAAc,GAAG,OAAO,MAAM;QAE/C,eAAe;QAEf,MAAM,YAAY,OAAO;QAEzB,IAAI;YACF,2BAA2B;YAC3B,MAAM,UAAe;gBACnB,YAAY;gBACZ,aAAa,kBAAkB,OAAO,mBAAmB;gBACzD,cAAc;gBACd,eAAe;gBACf,YAAY;gBACZ,WAAW,SAAS,IAAI,MAAM;gBAE9B,MAAM;gBACN,SAAS,UAAU,QAAQ;gBAC3B,aAAa;gBACb,gBAAgB,UAAU,YAAY;YACxC;YAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CACnD,IAAI,CAAC,qBACL,MAAM,CAAC,SACP,MAAM,CAAC,MACP,MAAM;YAET,IAAI,MAAM,MAAM;YAEhB,6FAA6F;YAC7F,IAAI,SAAS;gBACX,MAAM,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,sBAAsB,MAAM,CAAC;oBACvE,UAAU,OAAO,SAAS,EAAE;oBAC5B,QAAQ;oBACR,QAAQ,EAAE;oBACV,QAAQ;oBACR,WAAW,SAAS,IAAI,MAAM;gBAChC;gBACA,IAAI,MAAM,MAAM;YAClB;YAEA,mDAAmD;YACnD,YAAY,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,YAAY;wBAAE,GAAG,CAAC;wBAAE,OAAO,EAAE,EAAE,KAAK,IAAI;oBAAI,IAAI;YAEhG,YAAY;YAEZ,yBAAyB;YACzB,MAAM;YAEN,2DAA2D;YAC3D,IAAI,sBAAsB,WAAW;gBACnC,MAAM,YAAY;YACpB;QACF,EAAE,OAAO,GAAQ;YACf,MAAM,GAAG,WAAW;QACtB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,eAAe,YAAY,SAAiB;QAC1C,qBAAqB;QACrB,kBAAkB;QAElB,IAAI;YACF,MAAM,IAAI,MAAM,iIAAQ,CACrB,IAAI,CAAC,qBACL,MAAM,CACL,iJAED,EAAE,CAAC,cAAc,WACjB,KAAK,CAAC,eAAe;gBAAE,WAAW;YAAM,GACxC,KAAK,CAAC;YAET,MAAM,IAAI,MAAM,iIAAQ,CACrB,IAAI,CAAC,uBACL,MAAM,CAAC,sEACP,EAAE,CAAC,cAAc,WACjB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC;YAET,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;YAC1B,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;YAE1B,MAAM,YAAa,EAAE,IAAI,IAAI,EAAE;YAC/B,WAAW;YACX,aAAc,EAAE,IAAI,IAAI,EAAE;YAE1B,6BAA6B;YAC7B,MAAM,WAAW,UAAU,GAAG,CAAC,CAAC,IAAM,OAAO,EAAE,EAAE,GAAG,MAAM,CAAC;YAC3D,IAAI,SAAS,MAAM,KAAK,GAAG;gBACzB,eAAe,EAAE;YACnB,OAAO;gBACL,MAAM,IAAI,MAAM,iIAAQ,CACrB,IAAI,CAAC,sBACL,MAAM,CAAC,yDACP,EAAE,CAAC,YAAY,UACf,KAAK,CAAC,cAAc;oBAAE,WAAW;gBAAM,GACvC,KAAK,CAAC;gBAET,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;gBAC1B,eAAgB,EAAE,IAAI,IAAI,EAAE;YAC9B;QACF,EAAE,OAAO,GAAQ;YACf,MAAM,GAAG,WAAW;YACpB,WAAW,EAAE;YACb,aAAa,EAAE;YACf,eAAe,EAAE;QACnB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,IAAI,CAAC,mBAAmB,OAAO;QAC/B,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,sBAAsB;IAC7D,GAAG;QAAC;QAAmB;KAAS;IAEhC,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,IAAI,CAAC,iBAAiB,OAAO;QAC7B,OAAO,gBAAgB,QAAQ,IAAI,WAAW,CAAC,gBAAgB,UAAU,CAAC,IAAI;IAChF,GAAG;QAAC;QAAiB;KAAY;IAEjC,MAAM,cAAc,IAAA,gNAAO,EAAC;QAC1B,MAAM,MAAM,QAAQ,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,EAAE,YAAY,GAAG;QAC5D,MAAM,OAAO,QAAQ,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,EAAE,UAAU,GAAG;QAC3D,OAAO,MAAM,IAAI,OAAO,MAAM;IAChC,GAAG;QAAC;KAAQ;IAEZ,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC5B,OAAO,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,WAAW,IAAI;IAC5E,GAAG;QAAC;KAAQ;IAEZ,SAAS,aAAa,KAAe;QACnC,MAAM,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,MAAM,UAAU,IAAI,EAAE,MAAM,WAAW;QACjE,cAAc,OAAO,MAAM,EAAE;QAC7B,kBAAkB;QAClB,kBAAkB,OAAO,MAAM,cAAc,IAAI;QACjD,eAAe,MAAM,SAAS,IAAI;QAClC,gBAAgB;IAClB;IAEA,eAAe;QACb,IAAI,CAAC,YAAY;QACjB,MAAM,MAAM,EAAE;QACd,IAAI,OAAO,GAAG,OAAO,MAAM;QAE3B,kBAAkB;QAClB,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,sBAAsB,MAAM,CAAC;gBACjE,UAAU;gBACV,QAAQ;gBACR,QAAQ;gBACR,QAAQ;gBACR,WAAW,YAAY,IAAI,MAAM;YACnC;YAEA,IAAI,OAAO,MAAM;YAEjB,kBAAkB;YAClB,IAAI,mBAAmB,MAAM,YAAY;YACzC,0EAA0E;YAC1E,MAAM;YAEN,gBAAgB;YAChB,cAAc;YACd,eAAe;QACjB,EAAE,OAAO,GAAQ;YACf,MAAM,GAAG,WAAW;QACtB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC,uKAAI;oCAAC,MAAK;oCAAS,WAAU;8CAAwC;;;;;;8CAGtE,8OAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,8OAAC;oCAAE,WAAU;;wCAA6B;sDACvB,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;wCAA6B;;;;;;;;;;;;;sCAIlF,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA+D;;;;;;;;;;;;gBAKpG,oBAAM,8OAAC;oBAAI,WAAU;8BAA6D;;;;;2BAAa;8BAGhG,8OAAC;oBAAQ,WAAU;;sCACjB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAwB;;;;;;8CACvC,8OAAC;oCAAI,WAAU;8CAA8B,UAAU,MAAM,MAAM,aAAa;;;;;;;;;;;;sCAElF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAwB;;;;;;8CACvC,8OAAC;oCAAI,WAAU;8CAA8B,UAAU,MAAM,MAAM,GAAG;;;;;;;;;;;;sCAExE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAwB;;;;;;8CACvC,8OAAC;oCAAI,WAAU;8CAA8B,UAAU,MAAM,MAAM,GAAG;;;;;;;;;;;;sCAExE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAwB;;;;;;8CACvC,8OAAC;oCAAI,WAAU;8CAA8B,UAAU,MAAM,UAAU,MAAM;;;;;;;;;;;;;;;;;;8BAIzF,8OAAC;oBAAQ,WAAU;;sCACjB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,8OAAC;4CAAI,WAAU;;gDAA6B;8DAC1B,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;gDAAgB;;;;;;;;;;;;;8CAGpE,8OAAC;oCAAI,WAAU;;wCAAwB;sDAC7B,8OAAC;4CAAK,WAAU;sDAAiB,UAAU,MAAM,eAAe,MAAM;;;;;;;;;;;;;;;;;;wBAIjF,eAAe,MAAM,KAAK,kBACzB,8OAAC;4BAAI,WAAU;sCAA6B;;;;;iDAE5C,8OAAC;4BAAI,WAAU;sCACZ,eAAe,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;gCAChC,MAAM,IAAI,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,EAAE,UAAU;gCAC3D,MAAM,OAAO,GAAG,YAAY,CAAC,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC,GAAG,IAAI;gCACjE,MAAM,QAAQ,MAAM,QAAQ;gCAC5B,MAAM,WAAW,IAAI,GAAG,EAAE,KAAK,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE,EAAE,UAAU,EAAE;gCAE7E,MAAM,eAAe,EAAE,WAAW,GAC9B,YAAY,CAAC,OAAO,EAAE,WAAW,EAAE,EAAE,QAAQ,aAC7C;gCAEJ,MAAM,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,WAAW;gCAEzD,qBACE,8OAAC;oCAAe,WAAU;;sDACxB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAI,WAAU;;gEAAwB;gEAAkB,EAAE,EAAE;;;;;;;sEAC7D,8OAAC;4DAAI,WAAU;;gEACZ;gEACA,EAAE,SAAS,GAAG,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,GAAG;gEACpC,EAAE,WAAW,GAAG,CAAC,GAAG,EAAE,OAAO,EAAE,WAAW,GAAG,GAAG;;;;;;;;;;;;;8DAGrD,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAyB,MAAM;;;;;;sEAC9C,8OAAC;4DAAI,WAAU;sEAAwB;;;;;;;;;;;;;;;;;;sDAI3C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DAAiB;;;;;;8DAChC,8OAAC;oDAAI,WAAU;8DAAiB;;;;;;;;;;;;sDAGlC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,SAAS,IAAM,YAAY,OAAO,EAAE,UAAU;oDAC9C,WAAU;8DACX;;;;;;8DAGD,8OAAC;oDACC,SAAS,IAAM,aAAa;oDAC5B,WAAU;8DACX;;;;;;;;;;;;;mCA/BK,EAAE,EAAE;;;;;4BAqClB;;;;;;;;;;;;8BAKE,8OAAC;oBAAQ,WAAU;;sCAEjB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAgB;;;;;;8CAC/B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,OAAO;oDAAS,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAU;;;;;;;;;;;;sDAEhF,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,OAAO;oDAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAU;;;;;;;;;;;;sDAElF,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,OAAO;oDAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAU;;;;;;;;;;;;sDAElF,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,OAAO;oDAAY,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAU;;;;;;;;;;;;;;;;;;8CAIxF,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAW,CAAC,oDAAoD,EAAE,iBAAiB,8BAA8B,0BAA0B;8CAE1I,iBAAiB,YAAY;;;;;;;;;;;;sCAKlC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAgB;;;;;;8CAC/B,8OAAC;oCAAE,WAAU;;wCAA6B;sDAClC,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;wCAAU;sDAAG,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;wCAAiB;;;;;;;8CAGtG,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;;gDAAwB;8DAEvC,8OAAC;oDACC,OAAO;oDACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK,GAAG,OAAO,EAAE,MAAM,CAAC,KAAK,IAAI;oDAC7E,WAAU;;sEAEV,8OAAC;4DAAO,OAAM;sEAAG;;;;;;wDAChB,SAAS,GAAG,CAAC,CAAC;4DACb,MAAM,OAAO,EAAE,QAAQ,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC;4DACpD,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE;4DACtF,qBACE,8OAAC;gEAAkB,OAAO,EAAE,EAAE;0EAC3B;+DADU,EAAE,EAAE;;;;;wDAIrB;;;;;;;;;;;;;sDAIJ,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDACC,OAAO;oDACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK,GAAG,OAAO,EAAE,MAAM,CAAC,KAAK,IAAI;oDAC9E,WAAU;;sEAEV,8OAAC;4DAAO,OAAM;sEAAG;;;;;;wDAChB,UAAU,GAAG,CAAC,CAAC,kBACd,8OAAC;gEAAkB,OAAO,EAAE,EAAE;0EAC3B,EAAE,IAAI;+DADI,EAAE,EAAE;;;;;;;;;;;;;;;;;sDAOvB,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,MAAK;oDAAS,OAAO;oDAAU,UAAU,CAAC,IAAM,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAI,WAAU;;;;;;;;;;;;sDAGxG,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDAAM,MAAK;oDAAS,OAAO;oDAAgB,UAAU,CAAC,IAAM,kBAAkB,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAI,WAAU;;;;;;;;;;;;sDAGpH,8OAAC;4CAAM,WAAU;;gDAAU;8DAEzB,8OAAC;oDACC,OAAO,WAAW,IAAI,OAAO,EAAE,kBAAkB,EAAE,aAAa;oDAChE,QAAQ;oDACR,WAAU;;;;;;;;;;;;sDAId,8OAAC;4CAAM,WAAU;;gDAAwB;8DAEvC,8OAAC;oDAAM,OAAO;oDAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAU;;;;;;;;;;;;sDAIlF,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAgB;;;;;;sEAC/B,8OAAC;4DAAI,WAAU;sEAAwB;;;;;;;;;;;;8DAEzC,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,WAAW,CAAC,IAAM,CAAC;oDAClC,WAAW,CAAC,6CAA6C,EAAE,UAAU,2BAA2B,0BAA0B;8DAEzH,UAAU,QAAQ;;;;;;;;;;;;wCAKtB,wBACC;;8DACE,8OAAC;oDAAM,WAAU;;wDAAU;sEAEzB,8OAAC;4DACC,OAAO;4DACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;4DAC5C,WAAU;;8EAGV,8OAAC;oEAAO,OAAM;8EAAM;;;;;;8EACpB,8OAAC;oEAAO,OAAM;8EAAW;;;;;;8EACzB,8OAAC;oEAAO,OAAM;8EAAO;;;;;;8EAErB,8OAAC;oEAAO,OAAM;8EAAS;;;;;;8EACvB,8OAAC;oEAAO,OAAM;8EAAU;;;;;;;;;;;;;;;;;;8DAI5B,8OAAC;oDAAM,WAAU;;wDAAU;sEAEzB,8OAAC;4DACC,MAAK;4DACL,OAAO;4DACP,UAAU,CAAC,IAAM,aAAa,OAAO,EAAE,MAAM,CAAC,KAAK;4DACnD,WAAU;;;;;;sEAEZ,8OAAC;4DAAI,WAAU;;gEAA6B;8EAC1B,8OAAC;oEAAK,WAAU;8EAAiB,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,kBAAkB,EAAE;;;;;;;;;;;;;;;;;;;2DAI7F;;;;;;;8CAGN,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAW,CAAC,oDAAoD,EAAE,cAAc,8BAA8B,0BAA0B;8CAEvI,cAAc,YAAY,UAAU,6BAA6B;;;;;;;;;;;;;;;;;;8BAMxE,8OAAC;oBAAQ,WAAU;;sCACjB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAgB;;;;;;8CAC/B,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;oCACpC,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAId,8OAAC;4BAAI,WAAU;sCACZ,CAAC,UAAU,MAAM,IAAI,CAAC;gCAAE,QAAQ;4BAAG,KAAK,QAAQ,EAAE,GAAG,CAAC,CAAC,GAAQ;gCAC9D,IAAI,SAAS;oCACX,qBACE,8OAAC;wCAAc,WAAU;;0DACvB,8OAAC;gDAAI,WAAU;;;;;;0DACf,8OAAC;gDAAI,WAAU;;;;;;;uCAFP;;;;;gCAKd;gCAEA,MAAM,OAAO,EAAE,QAAQ,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC;gCACpD,MAAM,QAAQ,MAAM,QAAQ,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE;gCACrD,MAAM,QAAQ,EAAE,EAAE,KAAK;gCAEvB,qBACE,8OAAC;oCAAkB,SAAS,IAAM,YAAY,EAAE,EAAE;oCAAG,WAAU;;sDAC7D,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAI,WAAU;sEAAyB;;;;;;sEACxC,8OAAC;4DAAI,WAAU;;gEACZ,EAAE,KAAK;gEAAC;gEAAQ,EAAE,GAAG;;;;;;;;;;;;;8DAI1B,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAW,CAAC,sBAAsB,EAAE,SAAS,IAAI,iBAAiB,SAAS,IAAI,oBAAoB,cAAc;sEACnH;;;;;;sEAEH,8OAAC;4DAAI,WAAU;sEAAwB;;;;;;;;;;;;;;;;;;sDAI3C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;wDAAK;sEACG,8OAAC;4DAAK,WAAU;sEAAiB,MAAM,EAAE,KAAK;;;;;;;;;;;;8DAEvD,8OAAC;;wDAAK;sEACC,8OAAC;4DAAK,WAAU;sEAAiB,MAAM,EAAE,GAAG;;;;;;;;;;;;;;;;;;;mCAtB1C,EAAE,EAAE;;;;;4BA2BrB;;;;;;;;;;;;gBAKH,kCACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;0DACvC,8OAAC;gDAAI,WAAU;;oDACZ,iBAAiB,QAAQ;oDAAK;kEAC/B,8OAAC;wDAAK,WAAU;;4DAAoC;4DAC/C,iBAAiB,SAAS;4DAAG;4DAAQ,iBAAiB,OAAO;;;;;;;;;;;;;0DAGpE,8OAAC;gDAAI,WAAU;;oDAAe;kEACrB,8OAAC;wDAAK,WAAU;kEAAiB,kBAAkB,EAAE,gBAAgB,KAAK,IAAI;;;;;;oDACpF;oDAAM;kEACuB,8OAAC;wDAAK,WAAU;kEAAiB,MAAM;;;;;;;;;;;;;;;;;;kDAIzE,8OAAC;wCAAO,SAAS,IAAM,qBAAqB;wCAAO,WAAU;kDAAsD;;;;;;;;;;;;4BAKpH,+BACC,8OAAC;gCAAI,WAAU;0CAA6B;;;;;qDAE5C;;oCAEG,cAAc,MAAM,GAAG,kBACtB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;0DACvC,8OAAC;gDAAI,WAAU;0DACZ,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;oDAC9B,MAAM,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,WAAW;oDACzD,qBACE,8OAAC;wDAAe,WAAU;;0EACxB,8OAAC;gEAAI,WAAU;;oEAAgB;oEACrB,EAAE,EAAE;oEAAC;kFAAO,8OAAC;wEAAK,WAAU;kFAAiB,MAAM;;;;;;;;;;;;0EAE7D,8OAAC;gEACC,SAAS,IAAM,aAAa;gEAC5B,WAAU;0EACX;;;;;;;uDAPO,EAAE,EAAE;;;;;gDAYlB;;;;;;;;;;;+CAGF;kDAEJ,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEAAgB;;;;;;kEAC/B,8OAAC;wDAAI,WAAU;kEACZ,QAAQ,MAAM,KAAK,kBAClB,8OAAC;4DAAI,WAAU;sEAAwB;;;;;mEAEvC,QAAQ,GAAG,CAAC,CAAC;4DACX,MAAM,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,WAAW;4DACzD,qBACE,8OAAC;gEAAe,WAAU;;kFACxB,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAI,WAAU;;oFAAgB;oFAC3B,EAAE,YAAY;oFAAE;kGAClB,8OAAC;wFAAK,WAAU;;4FACb,EAAE,WAAW,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE,WAAW,CAAC,EAAE,QAAQ,YAAY,GAAG;4FACzE,EAAE,SAAS,GAAG,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,GAAG;;;;;;;;;;;;;0FAGzC,8OAAC;gFAAI,WAAU;0FACZ,MAAM,EAAE,SAAS,IAAK,EAAE,EAAE,UAAU,IAAI,EAAE,EAAE,YAAY;;;;;;;;;;;;kFAI7D,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;;oFAAK;kGACE,8OAAC;wFAAK,WAAU;kGAAiB,MAAM,EAAE,UAAU;;;;;;oFAAS;oFAAS;kGAC3E,8OAAC;wFAAK,WAAU;kGAAiB,MAAM,EAAE,WAAW;;;;;;oFAAS;oFAAQ;kGACrE,8OAAC;wFAAK,WAAU;kGAAiB,MAAM;;;;;;;;;;;;0FAEzC,8OAAC;gFAAK,WAAU;0FACb,EAAE,cAAc,GAAG,OAAO,EAAE,cAAc,IAAI;;;;;;;;;;;;;+DArB3C,EAAE,EAAE;;;;;wDA0BlB;;;;;;;;;;;;0DAMN,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEAAgB;;;;;;kEAC/B,8OAAC;wDAAI,WAAU;kEACZ,UAAU,MAAM,KAAK,kBACpB,8OAAC;4DAAI,WAAU;sEAAwB;;;;;mEAEvC,UAAU,GAAG,CAAC,CAAC,kBACb,8OAAC;gEAAe,WAAU;;kFACxB,8OAAC;wEAAI,WAAU;;4EACZ,EAAE,IAAI;4EAAE;0FACT,8OAAC;gFAAK,WAAU;0FAAiB,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE;;;;;;0FACrE,8OAAC;gFAAK,WAAU;;oFACb,EAAE,QAAQ,GAAG,CAAC,UAAU,EAAE,EAAE,QAAQ,EAAE,GAAG;oFACzC,EAAE,IAAI,GAAG,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,GAAG;;;;;;;;;;;;;kFAG/B,8OAAC;wEAAI,WAAU;kFAAyB,OAAO,EAAE,UAAU;;;;;;;+DATnD,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;kDAkBxB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DAAgB;;;;;;0DAC/B,8OAAC;gDAAI,WAAU;0DACZ,YAAY,MAAM,KAAK,kBACtB,8OAAC;oDAAI,WAAU;8DAAwB;;;;;2DAEvC,YAAY,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,kBAC5B,8OAAC;wDAAe,WAAU;;0EACxB,8OAAC;gEAAI,WAAU;;oEAAgB;oEACrB,EAAE,QAAQ;oEAAC;oEAAI,EAAE,MAAM;oEAAC;kFAAG,8OAAC;wEAAK,WAAU;kFAAiB,MAAM,EAAE,MAAM;;;;;;oEAAU;kFAC5F,8OAAC;wEAAK,WAAU;kFAAyB,EAAE,SAAS,GAAG,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,GAAG;;;;;;;;;;;;0EAE/E,8OAAC;gEAAI,WAAU;0EAAyB,OAAO,EAAE,UAAU;;;;;;;uDALnD,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAe5B;gBAGH,6BACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;0DACvC,8OAAC;gDAAI,WAAU;;oDAAwB;oDAAQ;;;;;;;;;;;;;kDAEjD,8OAAC;wCACC,SAAS,IAAM,gBAAgB;wCAC/B,WAAU;kDACX;;;;;;;;;;;;0CAKH,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;;4CAAU;0DAEzB,8OAAC;gDACC,OAAO;gDACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gDACjD,WAAU;;kEAEV,8OAAC;wDAAO,OAAM;kEAAM;;;;;;kEACpB,8OAAC;wDAAO,OAAM;kEAAW;;;;;;kEACzB,8OAAC;wDAAO,OAAM;kEAAO;;;;;;kEACrB,8OAAC;wDAAO,OAAM;kEAAS;;;;;;kEACvB,8OAAC;wDAAO,OAAM;kEAAU;;;;;;;;;;;;;;;;;;kDAI5B,8OAAC;wCAAM,WAAU;;4CAAU;0DAEzB,8OAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,kBAAkB,OAAO,EAAE,MAAM,CAAC,KAAK;gDACxD,WAAU;;;;;;;;;;;;kDAId,8OAAC;wCAAM,WAAU;;4CAAU;0DAEzB,8OAAC;gDACC,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAU;;;;;;;;;;;;kDAId,8OAAC;wCACC,SAAS;wCACT,UAAU;wCACV,WAAW,CAAC,+CAA+C,EAAE,iBAAiB,8BAA8B,0BAA0B;kDAErI,iBAAiB,YAAY;;;;;;;;;;;;;;;;;;;;;;2BAKpC;;;;;;;;;;;;AAIZ"}}]
}