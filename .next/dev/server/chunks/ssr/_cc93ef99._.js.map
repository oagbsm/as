{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/a./mato1/app/admin/credits/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\ntype OrderRow = {\n  id: number;\n  created_at: string;\n  status: string;\n  total_amount: any;\n  customer_id: number | null;\n  delivery_name: string | null;\n  delivery_phone: string | null;\n};\n\ntype PaymentRow = {\n  order_id: number;\n  amount: any;\n  status: string;\n  method: string;\n  created_at: string;\n  reference: string | null;\n};\n\nfunction money(n: any) {\n  const x = Number(n ?? 0);\n  return new Intl.NumberFormat(\"en-GB\", { style: \"currency\", currency: \"GBP\" }).format(\n    Number.isFinite(x) ? x : 0\n  );\n}\n\nfunction num(n: any) {\n  const x = Number(n ?? 0);\n  return Number.isFinite(x) ? x : 0;\n}\n\nfunction fmtDate(s?: string | null) {\n  if (!s) return \"…\";\n  return String(s).replace(\"T\", \" \").replace(\"Z\", \"\");\n}\n\nfunction promptMethod(): \"EVC\" | \"CASH\" | \"MERCHANT\" | null {\n  const m = window\n    .prompt(\"Payment method? Type: EVC, CASH, or MERCHANT\", \"EVC\")\n    ?.trim()\n    .toUpperCase();\n  if (!m) return null;\n  if (m === \"EVC\" || m === \"CASH\" || m === \"MERCHANT\") return m;\n  alert(\"Invalid method. Use: EVC, CASH, MERCHANT\");\n  return null;\n}\n\ntype CreditOrder = OrderRow & {\n  total: number;\n  paid: number;\n  remaining: number;\n};\n\ntype CreditGroup = {\n  key: string; // customer_id or phone\n  customer_id: number | null;\n  name: string;\n  phone: string;\n  outstanding: number;\n  ordersCount: number;\n  lastOrderAt: string | null;\n  orders: CreditOrder[];\n};\n\nexport default function AdminCreditsPage() {\n  const [loading, setLoading] = useState(true);\n  const [busyKey, setBusyKey] = useState<string | null>(null);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [orders, setOrders] = useState<OrderRow[]>([]);\n  const [payments, setPayments] = useState<PaymentRow[]>([]);\n  const [selectedKey, setSelectedKey] = useState<string | null>(null);\n\n  async function load() {\n    setLoading(true);\n    setErr(null);\n\n    try {\n      const [{ data: o, error: oe }, { data: p, error: pe }] = await Promise.all([\n        supabase\n          .from(\"orders\")\n          .select(\"id,created_at,status,total_amount,customer_id,delivery_name,delivery_phone\")\n          .order(\"created_at\", { ascending: false })\n          .limit(500),\n        supabase\n          .from(\"payments\")\n          .select(\"order_id,amount,status,method,created_at,reference\")\n          .order(\"created_at\", { ascending: false })\n          .limit(2000),\n      ]);\n\n      if (oe) throw oe;\n      if (pe) throw pe;\n\n      setOrders((o ?? []) as any);\n      setPayments((p ?? []) as any);\n    } catch (e: any) {\n      setErr(e?.message || \"Failed to load credits\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      await load();\n      if (!alive) return;\n    })();\n    return () => {\n      alive = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const payMap = useMemo(() => {\n    // order_id -> paid SUCCESS sum\n    const m = new Map<number, number>();\n    for (const row of payments) {\n      const orderId = Number((row as any).order_id);\n      if (!orderId) continue;\n      const st = String((row as any).status || \"\").toUpperCase();\n      if (st !== \"SUCCESS\") continue;\n      m.set(orderId, (m.get(orderId) ?? 0) + num((row as any).amount));\n    }\n    return m;\n  }, [payments]);\n\n  const creditGroups = useMemo(() => {\n    const creditOrders: CreditOrder[] = orders\n      .map((o) => {\n        const total = num(o.total_amount);\n        const paid = payMap.get(Number(o.id)) ?? 0;\n        const remaining = Math.max(0, total - paid);\n        return { ...o, total, paid, remaining };\n      })\n      .filter((o) => {\n        const st = String(o.status || \"\").toUpperCase();\n        if (st === \"CANCELLED\") return false;\n        // credit = remaining > 0\n        return o.remaining > 0;\n      });\n\n    const groups = new Map<string, CreditGroup>();\n\n    for (const o of creditOrders) {\n      const key =\n        o.customer_id != null\n          ? `cid:${o.customer_id}`\n          : o.delivery_phone\n            ? `phone:${o.delivery_phone}`\n            : `unknown`;\n\n      const phone = o.delivery_phone ?? \"\";\n      const name = o.delivery_name ?? (o.customer_id != null ? `Customer #${o.customer_id}` : \"Unknown\");\n\n      const prev = groups.get(key);\n      const lastAt = !prev?.lastOrderAt ? o.created_at : o.created_at > prev.lastOrderAt ? o.created_at : prev.lastOrderAt;\n\n      if (!prev) {\n        groups.set(key, {\n          key,\n          customer_id: o.customer_id,\n          name,\n          phone,\n          outstanding: o.remaining,\n          ordersCount: 1,\n          lastOrderAt: lastAt,\n          orders: [o],\n        });\n      } else {\n        prev.outstanding += o.remaining;\n        prev.ordersCount += 1;\n        prev.lastOrderAt = lastAt;\n        prev.orders.push(o);\n      }\n    }\n\n    // sort highest outstanding first\n    return Array.from(groups.values()).sort((a, b) => b.outstanding - a.outstanding);\n  }, [orders, payMap]);\n\n  const stats = useMemo(() => {\n    const outstanding = creditGroups.reduce((s, g) => s + g.outstanding, 0);\n    const people = creditGroups.length;\n    const creditOrders = creditGroups.reduce((s, g) => s + g.ordersCount, 0);\n    return { outstanding, people, creditOrders };\n  }, [creditGroups]);\n\n  const selected = useMemo(() => {\n    if (!selectedKey) return null;\n    return creditGroups.find((g) => g.key === selectedKey) ?? null;\n  }, [selectedKey, creditGroups]);\n\n  async function addPayment(args: {\n    orderId: number;\n    amount: number;\n    method: \"EVC\" | \"CASH\" | \"MERCHANT\";\n  }) {\n    const ref = `CREDITS-${args.orderId}-${Date.now()}-${Math.random().toString(16).slice(2)}`;\n\n    const ins = await supabase.from(\"payments\").insert({\n      order_id: args.orderId,\n      method: args.method,\n      amount: args.amount,\n      status: \"SUCCESS\",\n      reference: ref,\n    });\n\n    if (ins.error) throw ins.error;\n  }\n\n  async function setOrderStatus(orderId: number, status: \"PENDING\" | \"PAID\") {\n    const up = await supabase.from(\"orders\").update({ status }).eq(\"id\", orderId);\n    if (up.error) throw up.error;\n  }\n\n  async function payOrder(order: CreditOrder, mode: \"FULL\" | \"PARTIAL\") {\n    if (order.remaining <= 0) return;\n\n    const method = promptMethod();\n    if (!method) return;\n\n    let amount = order.remaining;\n\n    if (mode === \"PARTIAL\") {\n      const raw = window.prompt(`Enter amount to pay (remaining: ${money(order.remaining)})`, \"\");\n      if (!raw) return;\n      amount = num(raw);\n      if (amount <= 0) return alert(\"Amount must be > 0\");\n      if (amount > order.remaining) return alert(\"Amount cannot exceed remaining\");\n    }\n\n    try {\n      setBusyKey(selectedKey ?? String(order.id));\n\n      await addPayment({ orderId: order.id, amount, method });\n\n      const newRemaining = Math.max(0, order.remaining - amount);\n      await setOrderStatus(order.id, newRemaining > 0 ? \"PENDING\" : \"PAID\");\n\n      await load();\n    } catch (e: any) {\n      console.error(e);\n      alert(e?.message || \"Payment failed\");\n    } finally {\n      setBusyKey(null);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 text-black\">\n      <div className=\"max-w-6xl mx-auto px-4 py-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <Link href=\"/admin\" className=\"text-sm text-blue-600 hover:underline\">\n              ← Admin\n            </Link>\n            <h1 className=\"text-xl font-semibold mt-2\">Credits</h1>\n            <p className=\"text-xs text-gray-600 mt-1\">\n              Credits are derived from orders where (Total − SUCCESS payments) &gt; 0.\n            </p>\n          </div>\n\n          <div className=\"text-xs text-gray-700 border bg-white rounded-2xl px-3 py-2\">\n            <div>\n              People owing: <span className=\"font-semibold\">{loading ? \"…\" : stats.people}</span>\n            </div>\n            <div>\n              Credit orders: <span className=\"font-semibold\">{loading ? \"…\" : stats.creditOrders}</span>\n            </div>\n            <div>\n              Outstanding: <span className=\"font-semibold\">{loading ? \"…\" : money(stats.outstanding)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-3 flex items-center gap-2\">\n          <button\n            onClick={load}\n            className=\"px-4 py-2 rounded-full border bg-white text-sm font-semibold\"\n            disabled={loading}\n          >\n            {loading ? \"Refreshing…\" : \"Refresh\"}\n          </button>\n        </div>\n\n        {err ? (\n          <div className=\"mt-4 border rounded-2xl p-4 bg-white text-sm text-red-600\">{err}</div>\n        ) : null}\n\n        {/* 2 cols phone, 4 cols PC */}\n        <section className=\"mt-4 grid grid-cols-2 lg:grid-cols-4 gap-3\">\n          {(loading ? Array.from({ length: 8 }) : creditGroups).slice(0, 16).map((g: any, idx: number) => (\n            <button\n              key={g?.key ?? idx}\n              onClick={() => setSelectedKey(g.key)}\n              className={`text-left border rounded-2xl p-4 bg-white hover:border-blue-400 ${\n                selectedKey === g?.key ? \"border-blue-600\" : \"\"\n              }`}\n            >\n              <div className=\"text-xs text-gray-500\">Customer</div>\n              <div className=\"mt-1 text-sm font-semibold line-clamp-1\">{g?.name ?? \"Unknown\"}</div>\n              <div className=\"mt-1 text-xs text-gray-600 line-clamp-1\">{g?.phone || \"—\"}</div>\n              <div className=\"mt-3 text-xs text-gray-500\">Outstanding</div>\n              <div className=\"mt-1 text-lg font-semibold\">{money(g?.outstanding)}</div>\n              <div className=\"mt-2 text-[11px] text-gray-500\">\n                {g?.ordersCount ?? 0} orders • last {fmtDate(g?.lastOrderAt)}\n              </div>\n            </button>\n          ))}\n        </section>\n\n        {/* Details */}\n        <section className=\"mt-6 border rounded-2xl bg-white p-4\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <div className=\"font-semibold\">Credit details</div>\n            <div className=\"text-xs text-gray-600\">\n              {selected ? (\n                <>\n                  Outstanding: <span className=\"font-semibold\">{money(selected.outstanding)}</span>\n                </>\n              ) : (\n                \"Select a customer\"\n              )}\n            </div>\n          </div>\n\n          {!selected ? (\n            <div className=\"mt-3 text-sm text-gray-600\">Tap a customer card above to manage their credit.</div>\n          ) : (\n            <div className=\"mt-4 space-y-3\">\n              <div className=\"text-sm\">\n                <div className=\"font-semibold\">{selected.name}</div>\n                <div className=\"text-gray-600\">{selected.phone || \"—\"}</div>\n              </div>\n\n              {selected.orders.map((o) => (\n                <div key={o.id} className=\"border rounded-2xl p-4\">\n                  <div className=\"flex justify-between gap-3\">\n                    <div className=\"text-sm font-semibold\">Order #{o.id}</div>\n                    <div className=\"text-xs text-gray-600\">{fmtDate(o.created_at)}</div>\n                  </div>\n\n                  <div className=\"mt-2 text-sm flex flex-wrap gap-4\">\n                    <div>\n                      <span className=\"text-gray-600\">Total:</span>{\" \"}\n                      <span className=\"font-semibold\">{money(o.total)}</span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Paid:</span>{\" \"}\n                      <span className=\"font-semibold\">{money(o.paid)}</span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Remaining:</span>{\" \"}\n                      <span className=\"font-semibold\">{money(o.remaining)}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-3 flex gap-2\">\n                    <button\n                      onClick={() => payOrder(o, \"FULL\")}\n                      disabled={busyKey != null}\n                      className=\"px-4 py-2 rounded-full bg-green-600 text-white text-sm font-semibold disabled:opacity-60\"\n                    >\n                      {busyKey ? \"Working…\" : \"Mark Paid\"}\n                    </button>\n                    <button\n                      onClick={() => payOrder(o, \"PARTIAL\")}\n                      disabled={busyKey != null}\n                      className=\"px-4 py-2 rounded-full border text-sm font-semibold disabled:opacity-60\"\n                    >\n                      Pay partial\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </section>\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}