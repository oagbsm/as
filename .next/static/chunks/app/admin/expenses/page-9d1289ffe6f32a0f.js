(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6798],{117:(e,s,l)=>{"use strict";l.d(s,{N:()=>a});let a=(0,l(1958).UU)("https://ecfxrmhrfjqdmqewzrfz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjZnhybWhyZmpxZG1xZXd6cmZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzNDA0OTgsImV4cCI6MjA4MTkxNjQ5OH0.jtF3Qp9N7rH-KCWEMHU0atH7h-LQEJBKYO9Q2HdxkX0")},511:(e,s,l)=>{Promise.resolve().then(l.bind(l,3917))},3917:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>r});var a=l(5155),t=l(2115),i=l(117);let n=e=>Number.isFinite(Number(e))?Number(e):0;function r(){let[e,s]=(0,t.useState)([]),[l,r]=(0,t.useState)(!1),[d,c]=(0,t.useState)("Delivery fuel"),[x,o]=(0,t.useState)("MATO"),[u,m]=(0,t.useState)("EVC"),[h,p]=(0,t.useState)("5"),[N,j]=(0,t.useState)(""),[v,g]=(0,t.useState)(()=>new Date().toISOString().slice(0,10));async function b(){r(!0);let{data:e,error:l}=await i.N.from("expenses").select("*").order("expense_date",{ascending:!1}).order("id",{ascending:!1}).limit(200);if(r(!1),l)return alert(l.message);s(e??[])}(0,t.useEffect)(()=>{b()},[]);let f=(0,t.useMemo)(()=>e.filter(e=>e.expense_date===v).reduce((e,s)=>e+n(s.amount),0),[e,v]);async function y(){if(!d.trim())return alert("Title required");let{error:e}=await i.N.from("expenses").insert({title:d.trim(),category:x,paid_method:u,amount:n(h),notes:N.trim()||null,expense_date:v});if(e)return alert(e.message);j(""),await b()}return(0,a.jsx)("main",{className:"min-h-screen bg-white text-black",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Expenses"}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"border rounded-2xl p-4",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Add expense"}),(0,a.jsxs)("div",{className:"mt-3 space-y-2 text-sm",children:[(0,a.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",value:d,onChange:e=>c(e.target.value),placeholder:"Title"}),(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Expense owner"}),(0,a.jsxs)("select",{className:"w-full border rounded-xl px-3 py-2",value:x,onChange:e=>o(e.target.value),children:[(0,a.jsx)("option",{value:"MATO",children:"MATO"}),(0,a.jsx)("option",{value:"LIIBAN",children:"LIIBAN"}),(0,a.jsx)("option",{value:"ABDIRAZAK",children:"ABDIRAZAK"})]}),(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Paid method"}),(0,a.jsxs)("select",{className:"w-full border rounded-xl px-3 py-2",value:u,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"EVC",children:"EVC"}),(0,a.jsx)("option",{value:"EDAHAB",children:"eDahab"}),(0,a.jsx)("option",{value:"MERCHANT",children:"Merchant"}),(0,a.jsx)("option",{value:"CASH",children:"Cash"}),(0,a.jsx)("option",{value:"PREMIER_BANK",children:"Premier Bank"})]}),(0,a.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",value:h,onChange:e=>p(e.target.value),placeholder:"Amount"}),(0,a.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",value:v,onChange:e=>g(e.target.value),type:"date"}),(0,a.jsx)("textarea",{className:"w-full border rounded-xl px-3 py-2",value:N,onChange:e=>j(e.target.value),placeholder:"Notes (optional)",rows:3}),(0,a.jsx)("button",{onClick:y,className:"w-full rounded-full bg-blue-600 text-white py-2 font-semibold",children:"Add"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Today total: ",f.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 border rounded-2xl p-4",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Recent"}),(0,a.jsx)("div",{className:"mt-3 text-sm",children:l?(0,a.jsx)("div",{className:"text-gray-600",children:"Loading…"}):0===e.length?(0,a.jsx)("div",{className:"text-gray-600",children:"No expenses."}):(0,a.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between border rounded-xl px-3 py-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[e.category," • ",e.paid_method??"EVC"," • ",e.expense_date]})]}),(0,a.jsx)("div",{className:"font-semibold",children:n(e.amount).toFixed(2)})]},e.id))})})]})]})]})})}}},e=>{e.O(0,[1958,8441,3794,7358],()=>e(e.s=511)),_N_E=e.O()}]);